# ğŸ“Š **ØªÙ‚Ø±ÙŠØ± ØªÙØµÙŠÙ„ÙŠ Ø´Ø§Ù…Ù„: Ù…Ù†ØµØªÙŠ (My Platform)**

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                               â•‘
â•‘          ğŸ“± Ù…Ù†ØµØªÙŠ - MY PLATFORM - Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙƒØ§Ù…Ù„ ğŸ“±         â•‘
â•‘                                                               â•‘
â•‘  ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ Ø§Ù„Ù…Ù…Ù„: Ø§Ù„Ù…Ø³Ø§Ø±Ø§ØªØŒ Ø§Ù„Ø¯ÙˆØ§Ù„ØŒ Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§ØªØŒ      â•‘
â•‘  Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ØŒ Ø§Ù„Ø±Ø¨Ø·ØŒ Ø§Ù„ØªØ¹Ø§Ø±ÙŠÙØŒ Ø§Ù„Ø£Ø²Ø±Ø§Ø±ØŒ Ø§Ù„Ø­Ù‚ÙˆÙ„ØŒ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª    â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ“‹ **Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª**

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#1-Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
2. [Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª ÙˆØ§Ù„Ù…Ù„ÙØ§Øª](#2-Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª-ÙˆØ§Ù„Ù…Ù„ÙØ§Øª)
3. [Ø§Ù„ØªØ¹Ø§Ø±ÙŠÙ ÙˆØ§Ù„Ø£Ù†ÙˆØ§Ø¹](#3-Ø§Ù„ØªØ¹Ø§Ø±ÙŠÙ-ÙˆØ§Ù„Ø£Ù†ÙˆØ§Ø¹)
4. [Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯Ø§Øª](#4-Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯Ø§Øª)
5. [Ø§Ù„Ù€ State Management](#5-Ø§Ù„Ù€-state-management)
6. [Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©](#6-Ø§Ù„Ø¯ÙˆØ§Ù„-Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)
7. [Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª API](#7-Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª-api)
8. [Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰](#8-Ø§Ù„Ø±Ø¨Ø·-Ù…Ø¹-Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª-Ø§Ù„Ø£Ø®Ø±Ù‰)
9. [ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…](#9-ÙˆØ§Ø¬Ù‡Ø©-Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)
10. [Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ÙˆØ§Ù„Ø£Ù‚Ø³Ø§Ù…](#10-Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª-ÙˆØ§Ù„Ø£Ù‚Ø³Ø§Ù…)
11. [Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆÙˆØ¸Ø§Ø¦ÙÙ‡Ø§](#11-Ø§Ù„Ø£Ø²Ø±Ø§Ø±-ÙˆÙˆØ¸Ø§Ø¦ÙÙ‡Ø§)
12. [Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ§Ù„Ø®Ø§Ù†Ø§Øª](#12-Ø§Ù„Ø­Ù‚ÙˆÙ„-ÙˆØ§Ù„Ø®Ø§Ù†Ø§Øª)
13. [Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„](#13-Ø³ÙŠØ±-Ø§Ù„Ø¹Ù…Ù„)

---

## 1ï¸âƒ£ **Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©**

### **Ø§Ù„ØºØ±Ø¶ Ù…Ù† Ù…Ù†ØµØªÙŠ:**
ØµÙØ­Ø© "Ù…Ù†ØµØªÙŠ" Ù‡ÙŠ Ù…Ø±ÙƒØ² Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø´Ø®ØµÙŠ Ù„Ù„ÙˆØ³ÙŠØ· Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠØŒ ØªØ¹Ø±Ø¶:
- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„Ø© Ø¹Ù† Ù†Ø´Ø§Ø·Ù‡
- Ø¥Ø¹Ù„Ø§Ù†Ø§ØªÙ‡ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
- Ø·Ù„Ø¨Ø§ØªÙ‡ ÙˆØ¹Ø±ÙˆØ¶Ù‡
- Ø£Ø¯Ø§Ø¦Ù‡ Ø¹Ù„Ù‰ Ù…Ø®ØªÙ„Ù Ø§Ù„Ù…Ù†ØµØ§Øª

### **Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…:**
- **Ø§Ù„Ù…Ø³Ø§Ø±:** `/my-platform`
- **Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:** `MyPlatform.tsx`
- **Ø§Ù„Ù†ÙˆØ¹:** ØµÙØ­Ø© Ø±Ø¦ÙŠØ³ÙŠØ© (Main Page)
- **Ø§Ù„ÙˆØµÙˆÙ„:** Ù„Ù„ÙˆØ³Ø·Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† ÙÙ‚Ø· (Authenticated)

---

## 2ï¸âƒ£ **Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª ÙˆØ§Ù„Ù…Ù„ÙØ§Øª**

### **Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©:**

```
ğŸ“ Project Root
â”‚
â”œâ”€â”€ ğŸ“ components/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ MyPlatform.tsx               â† Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
â”‚   â”‚   Ø§Ù„Ù…Ø³Ø§Ø±: /components/MyPlatform.tsx
â”‚   â”‚   Ø§Ù„Ø¯ÙˆØ±: ÙˆØ§Ø¬Ù‡Ø© Ù…Ù†ØµØªÙŠ Ø§Ù„ÙƒØ§Ù…Ù„Ø©
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ marketplace/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ MarketplacePage.tsx      â† ØµÙØ­Ø© Ø§Ù„Ø³ÙˆÙ‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ AcceptedOffersView.tsx   â† Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©
â”‚   â”‚   â””â”€â”€ ğŸ“„ MarketplaceModal.tsx     â† Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ owners/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ MyOffersView.tsx         â† Ø¹Ø±ÙˆØ¶ÙŠ
â”‚   â”‚   â””â”€â”€ ğŸ“„ OfferCard.tsx            â† Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¶
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ notifications/
â”‚       â””â”€â”€ ğŸ“„ NotificationSystem.tsx    â† Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
â”‚
â”œâ”€â”€ ğŸ“ api/
â”‚   â”œâ”€â”€ ğŸ“„ offers.ts                     â† API Ø§Ù„Ø¹Ø±ÙˆØ¶
â”‚   â”œâ”€â”€ ğŸ“„ requests.ts                   â† API Ø§Ù„Ø·Ù„Ø¨Ø§Øª
â”‚   â”œâ”€â”€ ğŸ“„ platforms.js                  â† API Ø§Ù„Ù…Ù†ØµØ§Øª
â”‚   â””â”€â”€ ğŸ“„ analytics.ts                  â† API Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª
â”‚
â”œâ”€â”€ ğŸ“ types/
â”‚   â”œâ”€â”€ ğŸ“„ offers.ts                     â† Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¹Ø±ÙˆØ¶
â”‚   â””â”€â”€ ğŸ“„ marketplace.ts                â† Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø³ÙˆÙ‚
â”‚
â”œâ”€â”€ ğŸ“ utils/
â”‚   â”œâ”€â”€ ğŸ“„ storage.ts                    â† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
â”‚   â””â”€â”€ ğŸ“„ publishedAds.ts               â† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø©
â”‚
â””â”€â”€ ğŸ“ hooks/
    â””â”€â”€ ğŸ“„ useNotifications.ts           â† Hook Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
```

---

## 3ï¸âƒ£ **Ø§Ù„ØªØ¹Ø§Ø±ÙŠÙ ÙˆØ§Ù„Ø£Ù†ÙˆØ§Ø¹**

### **Ø§Ù„ØªØ¹Ø§Ø±ÙŠÙ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:**

```typescript
// ==========================================
// FILE: types/offers.ts
// ==========================================

/**
 * Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø±Ø¶ - Ø¨ÙŠØ¹ Ø£Ùˆ Ø¥ÙŠØ¬Ø§Ø±
 */
export type OfferType = 'sale' | 'rent';

/**
 * Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶
 */
export type OfferStatus = 
  | 'active'      // Ù†Ø´Ø·
  | 'pending'     // Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
  | 'accepted'    // Ù…Ù‚Ø¨ÙˆÙ„
  | 'rejected'    // Ù…Ø±ÙÙˆØ¶
  | 'expired';    // Ù…Ù†ØªÙ‡ÙŠ

/**
 * Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±
 */
export type PropertyType = 
  | 'apartment'   // Ø´Ù‚Ø©
  | 'villa'       // ÙÙŠÙ„Ø§
  | 'house'       // Ù…Ù†Ø²Ù„
  | 'land'        // Ø£Ø±Ø¶
  | 'commercial'  // ØªØ¬Ø§Ø±ÙŠ
  | 'office';     // Ù…ÙƒØªØ¨

/**
 * ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ù…Ù„
 */
export interface Offer {
  // Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„ÙØ±ÙŠØ¯
  id: string;
  
  // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©
  title: string;                    // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ø±Ø¶
  description: string;              // Ø§Ù„ÙˆØµÙ
  type: OfferType;                  // Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø±Ø¶ (Ø¨ÙŠØ¹/Ø¥ÙŠØ¬Ø§Ø±)
  propertyType: PropertyType;       // Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±
  
  // Ø§Ù„Ø³Ø¹Ø± ÙˆØ§Ù„Ù…Ø³Ø§Ø­Ø©
  price: number;                    // Ø§Ù„Ø³Ø¹Ø±
  area: number;                     // Ø§Ù„Ù…Ø³Ø§Ø­Ø©
  
  // Ø§Ù„Ù…ÙˆÙ‚Ø¹
  location: {
    city: string;                   // Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©
    district: string;               // Ø§Ù„Ø­ÙŠ
    street?: string;                // Ø§Ù„Ø´Ø§Ø±Ø¹
    coordinates?: {
      lat: number;
      lng: number;
    };
  };
  
  // Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª
  bedrooms?: number;                // Ø¹Ø¯Ø¯ Ø§Ù„ØºØ±Ù
  bathrooms?: number;               // Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ù…Ø§Ù…Ø§Øª
  features: string[];               // Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª
  
  // Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
  images: string[];                 // ØµÙˆØ± Ø§Ù„Ø¹Ù‚Ø§Ø±
  videos?: string[];                // ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª
  documents?: string[];             // Ù…Ø³ØªÙ†Ø¯Ø§Øª
  
  // Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶
  status: OfferStatus;
  
  // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ
  ownerId: string;
  ownerName: string;
  ownerPhone: string;
  
  // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø´Ø±
  publishedPlatforms: string[];     // Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø¹Ù„ÙŠÙ‡Ø§
  publishedAt: Date;                // ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±
  expiresAt?: Date;                 // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
  
  // Ø§Ù„ØªÙØ§Ø¹Ù„
  views: number;                    // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª
  inquiries: number;                // Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª
  shares: number;                   // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ§Øª
  
  // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØµÙÙŠØ©
  createdAt: Date;
  updatedAt: Date;
}

/**
 * ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø·Ù„Ø¨
 */
export interface Request {
  id: string;
  userId: string;
  type: OfferType;
  propertyType: PropertyType;
  budget: {
    min: number;
    max: number;
  };
  location: {
    city: string;
    districts: string[];
  };
  requirements: {
    minArea?: number;
    maxArea?: number;
    minBedrooms?: number;
    minBathrooms?: number;
    features?: string[];
  };
  status: 'active' | 'fulfilled' | 'cancelled';
  createdAt: Date;
  expiresAt?: Date;
}

/**
 * ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ù†ØµØ©
 */
export interface Platform {
  id: string;
  name: string;                     // Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØµØ©
  nameAr: string;                   // Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
  type: 'marketplace' | 'social' | 'real-estate' | 'custom';
  icon: string;                     // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ù†ØµØ©
  isConnected: boolean;             // Ù‡Ù„ Ù…ØªØµÙ„Ø©ØŸ
  isActive: boolean;                // Ù‡Ù„ Ù†Ø´Ø·Ø©ØŸ
  credentials?: {
    apiKey?: string;
    username?: string;
    token?: string;
  };
  statistics: {
    totalAds: number;               // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
    activeAds: number;              // Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©
    views: number;                  // Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª
    inquiries: number;              // Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª
  };
}

/**
 * ÙˆØ§Ø¬Ù‡Ø© Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ù†ØµØªÙŠ
 */
export interface MyPlatformStats {
  // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø±ÙˆØ¶
  offers: {
    total: number;                  // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ø±ÙˆØ¶
    active: number;                 // Ø§Ù„Ù†Ø´Ø·Ø©
    pending: number;                // Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
    accepted: number;               // Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©
    expired: number;                // Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©
  };
  
  // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª
  requests: {
    total: number;
    active: number;
    fulfilled: number;
  };
  
  // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ù†ØµØ§Øª
  platforms: {
    total: number;                  // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØµØ§Øª
    connected: number;              // Ø§Ù„Ù…ØªØµÙ„Ø©
    totalAds: number;               // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
    totalViews: number;             // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª
    totalInquiries: number;         // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª
  };
  
  // Ø§Ù„Ø£Ø¯Ø§Ø¡
  performance: {
    responseRate: number;           // Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© (%)
    conversionRate: number;         // Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ (%)
    averageResponseTime: number;    // Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© (Ø¯Ù‚Ø§Ø¦Ù‚)
  };
}
```

---

## 4ï¸âƒ£ **Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯Ø§Øª**

### **Ø§Ø³ØªÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:**

```typescript
// ==========================================
// FILE: components/MyPlatform.tsx
// ==========================================

// React Core
import React, { useState, useEffect, useMemo, useCallback } from 'react';

// UI Components (shadcn/ui)
import { Card, CardContent, CardHeader, CardTitle } from './ui/card';
import { Button } from './ui/button';
import { Badge } from './ui/badge';
import { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';
import { 
  Dialog, 
  DialogContent, 
  DialogHeader, 
  DialogTitle 
} from './ui/dialog';
import { ScrollArea } from './ui/scroll-area';
import { Separator } from './ui/separator';
import { Progress } from './ui/progress';

// Icons (lucide-react)
import {
  BarChart3,          // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
  Home,               // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª
  Users,              // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
  TrendingUp,         // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù†Ù…Ùˆ
  Activity,           // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù†Ø´Ø§Ø·
  Eye,                // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª
  MessageSquare,      // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
  Share2,             // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
  CheckCircle,        // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯
  XCircle,            // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¥Ù„ØºØ§Ø¡
  Clock,              // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ÙˆÙ‚Øª
  AlertCircle,        // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
  Plus,               // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ©
  Edit,               // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
  Trash2,             // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø­Ø°Ù
  ExternalLink,       // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ
  Download,           // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
  Upload,             // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø±ÙØ¹
  RefreshCw,          // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«
  Settings,           // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
  Filter              // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØµÙÙŠØ©
} from 'lucide-react';

// API Functions
import { 
  getMyOffers,              // Ø¬Ù„Ø¨ Ø¹Ø±ÙˆØ¶ÙŠ
  getMyRequests,            // Ø¬Ù„Ø¨ Ø·Ù„Ø¨Ø§ØªÙŠ
  getOfferById,             // Ø¬Ù„Ø¨ Ø¹Ø±Ø¶ Ø¨Ø§Ù„Ù…Ø¹Ø±Ù
  updateOfferStatus,        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶
  deleteOffer               // Ø­Ø°Ù Ø¹Ø±Ø¶
} from '../api/offers';

import {
  getConnectedPlatforms,    // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ù…ØªØµÙ„Ø©
  getPlatformStats,         // Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ù†ØµØ©
  syncPlatformData          // Ù…Ø²Ø§Ù…Ù†Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØµØ©
} from '../api/platforms';

import {
  getMyPlatformStats,       // Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ù†ØµØªÙŠ
  trackEvent                // ØªØªØ¨Ø¹ Ø­Ø¯Ø«
} from '../api/analytics';

// Types
import type { 
  Offer, 
  Request, 
  Platform, 
  MyPlatformStats,
  OfferStatus,
  OfferType,
  PropertyType
} from '../types/offers';

// Utils
import { 
  formatPrice,              // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø³Ø¹Ø±
  formatDate,               // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ®
  formatNumber              // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…
} from '../utils/formatting';

import {
  saveToLocalStorage,       // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
  getFromLocalStorage       // Ø¬Ù„Ø¨ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
} from '../utils/storage';

// Hooks
import { useNotifications } from '../hooks/useNotifications';
import { useAuth } from '../hooks/useAuth';
```

### **Ø§Ø³ØªÙŠØ±Ø§Ø¯Ø§Øª Ù…Ù„Ù API:**

```typescript
// ==========================================
// FILE: api/offers.ts
// ==========================================

// Supabase Client
import { supabase } from '../lib/supabase';

// Types
import type { Offer, Request, OfferStatus } from '../types/offers';

// Utils
import { handleApiError } from '../utils/errorHandling';
```

---

## 5ï¸âƒ£ **Ø§Ù„Ù€ State Management**

### **State Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:**

```typescript
// ==========================================
// State Variables
// ==========================================

export function MyPlatform() {
  // ===== 1. Ø­Ø§Ù„Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª =====
  
  /**
   * Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
   */
  const [stats, setStats] = useState<MyPlatformStats | null>(null);
  
  /**
   * Ù‚Ø§Ø¦Ù…Ø© Ø¹Ø±ÙˆØ¶ÙŠ
   */
  const [offers, setOffers] = useState<Offer[]>([]);
  
  /**
   * Ù‚Ø§Ø¦Ù…Ø© Ø·Ù„Ø¨Ø§ØªÙŠ
   */
  const [requests, setRequests] = useState<Request[]>([]);
  
  /**
   * Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ù…ØªØµÙ„Ø©
   */
  const [platforms, setPlatforms] = useState<Platform[]>([]);
  
  /**
   * Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­Ø¯Ø¯ Ø­Ø§Ù„ÙŠØ§Ù‹
   */
  const [selectedOffer, setSelectedOffer] = useState<Offer | null>(null);
  
  // ===== 2. Ø­Ø§Ù„Ø© ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… =====
  
  /**
   * Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù†Ø´Ø·
   * Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ù…ÙƒÙ†Ø©: 'overview' | 'offers' | 'requests' | 'platforms'
   */
  const [activeTab, setActiveTab] = useState<string>('overview');
  
  /**
   * Ù‡Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù…ÙØªÙˆØ­Ø©ØŸ
   */
  const [isModalOpen, setIsModalOpen] = useState<boolean>(false);
  
  /**
   * Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©
   */
  const [filters, setFilters] = useState({
    type: 'all' as OfferType | 'all',
    status: 'all' as OfferStatus | 'all',
    platform: 'all' as string,
    dateFrom: null as Date | null,
    dateTo: null as Date | null
  });
  
  /**
   * Ù†Øµ Ø§Ù„Ø¨Ø­Ø«
   */
  const [searchQuery, setSearchQuery] = useState<string>('');
  
  /**
   * ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ø±Ø¶
   * Ø§Ù„Ù‚ÙŠÙ…: 'date-desc' | 'date-asc' | 'price-desc' | 'price-asc' | 'views-desc'
   */
  const [sortBy, setSortBy] = useState<string>('date-desc');
  
  // ===== 3. Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ù„Ø£Ø®Ø·Ø§Ø¡ =====
  
  /**
   * Ù‡Ù„ ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ
   */
  const [isLoading, setIsLoading] = useState<boolean>(true);
  
  /**
   * Ù‡Ù„ ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªØŸ
   */
  const [isLoadingStats, setIsLoadingStats] = useState<boolean>(false);
  
  /**
   * Ù‡Ù„ ÙŠØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ©ØŸ
   */
  const [isProcessing, setIsProcessing] = useState<boolean>(false);
  
  /**
   * Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø¥Ù† ÙˆØ¬Ø¯Øª
   */
  const [error, setError] = useState<string | null>(null);
  
  // ===== 4. Ø­Ø§Ù„Ø© Ø§Ù„ØµÙØ­Ø© =====
  
  /**
   * Ø±Ù‚Ù… Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠ
   */
  const [currentPage, setCurrentPage] = useState<number>(1);
  
  /**
   * Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù„ØµÙØ­Ø©
   */
  const [itemsPerPage] = useState<number>(12);
  
  /**
   * Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„ØµÙØ­Ø§Øª
   */
  const totalPages = useMemo(() => {
    return Math.ceil(filteredOffers.length / itemsPerPage);
  }, [filteredOffers, itemsPerPage]);
  
  // ===== 5. Hooks Ù…Ø®ØµØµØ© =====
  
  /**
   * Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³Ø¬Ù„
   */
  const { user } = useAuth();
  
  /**
   * Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
   */
  const { addNotification } = useNotifications();
  
  // ... Ø¨Ù‚ÙŠØ© Ø§Ù„Ù€ State
}
```

---

## 6ï¸âƒ£ **Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©**

### **Ø¯ÙˆØ§Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:**

```typescript
// ==========================================
// Data Fetching Functions
// ==========================================

/**
 * Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒÙˆÙ†
 * 
 * @description ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¤Ù‡Ø§ ÙÙŠ useEffect Ø¹Ù†Ø¯ mount
 * @returns Promise<void>
 */
const fetchAllData = useCallback(async (): Promise<void> => {
  try {
    setIsLoading(true);
    setError(null);
    
    // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ù„ØªÙˆØ§Ø²ÙŠ
    const [statsData, offersData, requestsData, platformsData] = await Promise.all([
      getMyPlatformStats(user.id),
      getMyOffers(user.id),
      getMyRequests(user.id),
      getConnectedPlatforms(user.id)
    ]);
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ State
    setStats(statsData);
    setOffers(offersData);
    setRequests(requestsData);
    setPlatforms(platformsData);
    
    // ØªØªØ¨Ø¹ Ø§Ù„Ø­Ø¯Ø«
    await trackEvent({
      userId: user.id,
      eventType: 'page_view',
      eventName: 'my_platform_viewed',
      category: 'PLATFORM'
    });
    
  } catch (err) {
    console.error('Error fetching data:', err);
    setError('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    addNotification({
      type: 'error',
      title: 'Ø®Ø·Ø£',
      message: 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª'
    });
  } finally {
    setIsLoading(false);
  }
}, [user.id, addNotification]);

/**
 * Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙÙ‚Ø·
 * 
 * @description ÙŠØ³ØªØ®Ø¯Ù… Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¨Ø¯ÙˆÙ† Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
 * @returns Promise<void>
 */
const refreshStats = useCallback(async (): Promise<void> => {
  try {
    setIsLoadingStats(true);
    const statsData = await getMyPlatformStats(user.id);
    setStats(statsData);
  } catch (err) {
    console.error('Error refreshing stats:', err);
  } finally {
    setIsLoadingStats(false);
  }
}, [user.id]);

/**
 * Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø¹Ø±Ø¶ Ù…Ø­Ø¯Ø¯
 * 
 * @param offerId - Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ø±Ø¶
 * @returns Promise<void>
 */
const fetchOfferDetails = useCallback(async (offerId: string): Promise<void> => {
  try {
    setIsProcessing(true);
    const offerData = await getOfferById(offerId);
    setSelectedOffer(offerData);
    setIsModalOpen(true);
  } catch (err) {
    console.error('Error fetching offer:', err);
    addNotification({
      type: 'error',
      title: 'Ø®Ø·Ø£',
      message: 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶'
    });
  } finally {
    setIsProcessing(false);
  }
}, [addNotification]);
```

### **Ø¯ÙˆØ§Ù„ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶:**

```typescript
// ==========================================
// Offer Management Functions
// ==========================================

/**
 * ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶
 * 
 * @param offerId - Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ø±Ø¶
 * @param newStatus - Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
 * @returns Promise<void>
 */
const handleUpdateOfferStatus = useCallback(async (
  offerId: string, 
  newStatus: OfferStatus
): Promise<void> => {
  try {
    setIsProcessing(true);
    
    // ØªØ­Ø¯ÙŠØ« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    await updateOfferStatus(offerId, newStatus);
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ State Ø§Ù„Ù…Ø­Ù„ÙŠ
    setOffers(prev => 
      prev.map(offer => 
        offer.id === offerId 
          ? { ...offer, status: newStatus, updatedAt: new Date() }
          : offer
      )
    );
    
    // Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¬Ø§Ø­
    addNotification({
      type: 'success',
      title: 'ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«',
      message: `ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø¥Ù„Ù‰: ${getStatusText(newStatus)}`
    });
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    await refreshStats();
    
    // ØªØªØ¨Ø¹ Ø§Ù„Ø­Ø¯Ø«
    await trackEvent({
      userId: user.id,
      eventType: 'user_action',
      eventName: 'offer_status_updated',
      category: 'OFFERS',
      properties: { offerId, newStatus }
    });
    
  } catch (err) {
    console.error('Error updating offer status:', err);
    addNotification({
      type: 'error',
      title: 'Ø®Ø·Ø£',
      message: 'ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶'
    });
  } finally {
    setIsProcessing(false);
  }
}, [user.id, addNotification, refreshStats]);

/**
 * Ø­Ø°Ù Ø¹Ø±Ø¶
 * 
 * @param offerId - Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ø±Ø¶
 * @returns Promise<void>
 */
const handleDeleteOffer = useCallback(async (offerId: string): Promise<void> => {
  // ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù
  const confirmed = window.confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø±Ø¶ØŸ');
  if (!confirmed) return;
  
  try {
    setIsProcessing(true);
    
    // Ø­Ø°Ù Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    await deleteOffer(offerId);
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ State Ø§Ù„Ù…Ø­Ù„ÙŠ
    setOffers(prev => prev.filter(offer => offer.id !== offerId));
    
    // Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¬Ø§Ø­
    addNotification({
      type: 'success',
      title: 'ØªÙ… Ø§Ù„Ø­Ø°Ù',
      message: 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ù†Ø¬Ø§Ø­'
    });
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    await refreshStats();
    
    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­Ø°ÙˆÙ Ù…ÙØªÙˆØ­Ø§Ù‹
    if (selectedOffer?.id === offerId) {
      setIsModalOpen(false);
      setSelectedOffer(null);
    }
    
  } catch (err) {
    console.error('Error deleting offer:', err);
    addNotification({
      type: 'error',
      title: 'Ø®Ø·Ø£',
      message: 'ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ø±Ø¶'
    });
  } finally {
    setIsProcessing(false);
  }
}, [selectedOffer, addNotification, refreshStats]);

/**
 * Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø¹Ø±Ø¶
 * 
 * @param offerId - Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ø±Ø¶
 * @returns Promise<void>
 */
const handleCopyOfferLink = useCallback(async (offerId: string): Promise<void> => {
  const link = `${window.location.origin}/offers/${offerId}`;
  
  try {
    await navigator.clipboard.writeText(link);
    
    addNotification({
      type: 'success',
      title: 'ØªÙ… Ø§Ù„Ù†Ø³Ø®',
      message: 'ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø¹Ø±Ø¶'
    });
    
    // ØªØªØ¨Ø¹ Ø§Ù„Ø­Ø¯Ø«
    await trackEvent({
      userId: user.id,
      eventType: 'user_action',
      eventName: 'offer_link_copied',
      category: 'OFFERS',
      properties: { offerId }
    });
    
  } catch (err) {
    addNotification({
      type: 'error',
      title: 'Ø®Ø·Ø£',
      message: 'ÙØ´Ù„ ÙÙŠ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·'
    });
  }
}, [user.id, addNotification]);

/**
 * Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¹Ø±Ø¶
 * 
 * @param offer - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø±Ø¶
 * @returns Promise<void>
 */
const handleShareOffer = useCallback(async (offer: Offer): Promise<void> => {
  const shareData = {
    title: offer.title,
    text: offer.description.substring(0, 100) + '...',
    url: `${window.location.origin}/offers/${offer.id}`
  };
  
  try {
    if (navigator.share) {
      // Ø§Ø³ØªØ®Ø¯Ø§Ù… Web Share API Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ØªØ§Ø­Ø§Ù‹
      await navigator.share(shareData);
      
      addNotification({
        type: 'success',
        title: 'ØªÙ…Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©',
        message: 'ØªÙ…Øª Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ù†Ø¬Ø§Ø­'
      });
      
      // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ§Øª
      setOffers(prev =>
        prev.map(o =>
          o.id === offer.id
            ? { ...o, shares: o.shares + 1 }
            : o
        )
      );
      
      // ØªØªØ¨Ø¹ Ø§Ù„Ø­Ø¯Ø«
      await trackEvent({
        userId: user.id,
        eventType: 'user_action',
        eventName: 'offer_shared',
        category: 'OFFERS',
        properties: { offerId: offer.id }
      });
      
    } else {
      // Fallback: Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
      await handleCopyOfferLink(offer.id);
    }
  } catch (err) {
    if ((err as Error).name !== 'AbortError') {
      console.error('Error sharing offer:', err);
    }
  }
}, [user.id, addNotification, handleCopyOfferLink]);
```

### **Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØµÙÙŠØ© ÙˆØ§Ù„ØªØ±ØªÙŠØ¨:**

```typescript
// ==========================================
// Filtering & Sorting Functions
// ==========================================

/**
 * ØªØµÙÙŠØ© Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø­Ø³Ø¨ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©
 * 
 * @description ÙŠØªÙ… Ø­Ø³Ø§Ø¨Ù‡Ø§ ÙÙŠ useMemo Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
 */
const filteredOffers = useMemo(() => {
  let result = [...offers];
  
  // ÙÙ„ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹ (Ø¨ÙŠØ¹/Ø¥ÙŠØ¬Ø§Ø±)
  if (filters.type !== 'all') {
    result = result.filter(offer => offer.type === filters.type);
  }
  
  // ÙÙ„ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
  if (filters.status !== 'all') {
    result = result.filter(offer => offer.status === filters.status);
  }
  
  // ÙÙ„ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†ØµØ©
  if (filters.platform !== 'all') {
    result = result.filter(offer => 
      offer.publishedPlatforms.includes(filters.platform)
    );
  }
  
  // ÙÙ„ØªØ± Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
  if (filters.dateFrom) {
    result = result.filter(offer => 
      new Date(offer.createdAt) >= filters.dateFrom!
    );
  }
  
  if (filters.dateTo) {
    result = result.filter(offer => 
      new Date(offer.createdAt) <= filters.dateTo!
    );
  }
  
  // ÙÙ„ØªØ± Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø«
  if (searchQuery) {
    const query = searchQuery.toLowerCase();
    result = result.filter(offer =>
      offer.title.toLowerCase().includes(query) ||
      offer.description.toLowerCase().includes(query) ||
      offer.location.city.toLowerCase().includes(query) ||
      offer.location.district.toLowerCase().includes(query)
    );
  }
  
  // Ø§Ù„ØªØ±ØªÙŠØ¨
  switch (sortBy) {
    case 'date-desc':
      result.sort((a, b) => 
        new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
      );
      break;
    case 'date-asc':
      result.sort((a, b) => 
        new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()
      );
      break;
    case 'price-desc':
      result.sort((a, b) => b.price - a.price);
      break;
    case 'price-asc':
      result.sort((a, b) => a.price - b.price);
      break;
    case 'views-desc':
      result.sort((a, b) => b.views - a.views);
      break;
    default:
      break;
  }
  
  return result;
}, [offers, filters, searchQuery, sortBy]);

/**
 * Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø© ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
 */
const paginatedOffers = useMemo(() => {
  const startIndex = (currentPage - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  return filteredOffers.slice(startIndex, endIndex);
}, [filteredOffers, currentPage, itemsPerPage]);

/**
 * Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙÙ„Ø§ØªØ±
 */
const handleResetFilters = useCallback(() => {
  setFilters({
    type: 'all',
    status: 'all',
    platform: 'all',
    dateFrom: null,
    dateTo: null
  });
  setSearchQuery('');
  setSortBy('date-desc');
  setCurrentPage(1);
}, []);
```

---

## 7ï¸âƒ£ **Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª API**

### **Ù…Ù„Ù API Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:**

```typescript
// ==========================================
// FILE: api/offers.ts
// ==========================================

/**
 * Ø¬Ù„Ø¨ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
 * 
 * @param userId - Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
 * @returns Promise<Offer[]>
 */
export async function getMyOffers(userId: string): Promise<Offer[]> {
  try {
    // Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù… Ù…Ù† Supabase
    const { data, error } = await supabase
      .from('owner_full_offers')
      .select('*')
      .eq('userId', userId)
      .order('createdAt', { ascending: false });
    
    if (error) throw error;
    
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    const offers: Offer[] = data.map(item => ({
      id: item.id,
      title: item.title,
      description: item.description,
      type: item.type as OfferType,
      propertyType: item.propertyType as PropertyType,
      price: item.price,
      area: item.area,
      location: {
        city: item.city,
        district: item.district,
        street: item.street,
        coordinates: item.coordinates
      },
      bedrooms: item.bedrooms,
      bathrooms: item.bathrooms,
      features: item.features || [],
      images: item.images || [],
      videos: item.videos || [],
      documents: item.documents || [],
      status: item.status as OfferStatus,
      ownerId: item.ownerId,
      ownerName: item.ownerName,
      ownerPhone: item.ownerPhone,
      publishedPlatforms: item.publishedPlatforms || [],
      publishedAt: new Date(item.publishedAt),
      expiresAt: item.expiresAt ? new Date(item.expiresAt) : undefined,
      views: item.views || 0,
      inquiries: item.inquiries || 0,
      shares: item.shares || 0,
      createdAt: new Date(item.createdAt),
      updatedAt: new Date(item.updatedAt)
    }));
    
    return offers;
    
  } catch (error) {
    console.error('Error fetching offers:', error);
    throw new Error('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ø±ÙˆØ¶');
  }
}

/**
 * Ø¬Ù„Ø¨ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
 * 
 * @param userId - Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
 * @returns Promise<Request[]>
 */
export async function getMyRequests(userId: string): Promise<Request[]> {
  try {
    const { data, error } = await supabase
      .from('owner_full_requests')
      .select('*')
      .eq('userId', userId)
      .order('createdAt', { ascending: false });
    
    if (error) throw error;
    
    const requests: Request[] = data.map(item => ({
      id: item.id,
      userId: item.userId,
      type: item.type as OfferType,
      propertyType: item.propertyType as PropertyType,
      budget: {
        min: item.budgetMin,
        max: item.budgetMax
      },
      location: {
        city: item.city,
        districts: item.districts || []
      },
      requirements: {
        minArea: item.minArea,
        maxArea: item.maxArea,
        minBedrooms: item.minBedrooms,
        minBathrooms: item.minBathrooms,
        features: item.features || []
      },
      status: item.status,
      createdAt: new Date(item.createdAt),
      expiresAt: item.expiresAt ? new Date(item.expiresAt) : undefined
    }));
    
    return requests;
    
  } catch (error) {
    console.error('Error fetching requests:', error);
    throw new Error('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª');
  }
}

/**
 * Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø¹Ø±Ø¶ Ù…Ø­Ø¯Ø¯
 * 
 * @param offerId - Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ø±Ø¶
 * @returns Promise<Offer>
 */
export async function getOfferById(offerId: string): Promise<Offer> {
  try {
    const { data, error } = await supabase
      .from('owner_full_offers')
      .select('*')
      .eq('id', offerId)
      .single();
    
    if (error) throw error;
    if (!data) throw new Error('Ø§Ù„Ø¹Ø±Ø¶ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
    
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ù†ÙØ³ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© ÙÙŠ getMyOffers)
    const offer: Offer = {
      // ... mapping Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    };
    
    // Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª
    await incrementOfferViews(offerId);
    
    return offer;
    
  } catch (error) {
    console.error('Error fetching offer:', error);
    throw new Error('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶');
  }
}

/**
 * ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶
 * 
 * @param offerId - Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ø±Ø¶
 * @param newStatus - Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
 * @returns Promise<void>
 */
export async function updateOfferStatus(
  offerId: string,
  newStatus: OfferStatus
): Promise<void> {
  try {
    const { error } = await supabase
      .from('owner_full_offers')
      .update({ 
        status: newStatus,
        updatedAt: new Date().toISOString()
      })
      .eq('id', offerId);
    
    if (error) throw error;
    
  } catch (error) {
    console.error('Error updating offer status:', error);
    throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø±Ø¶');
  }
}

/**
 * Ø­Ø°Ù Ø¹Ø±Ø¶
 * 
 * @param offerId - Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ø±Ø¶
 * @returns Promise<void>
 */
export async function deleteOffer(offerId: string): Promise<void> {
  try {
    // Ø­Ø°Ù Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    const { error } = await supabase
      .from('owner_full_offers')
      .delete()
      .eq('id', offerId);
    
    if (error) throw error;
    
    // Ø­Ø°Ù Ù…Ù† marketplace Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ù†Ø´ÙˆØ±Ø§Ù‹
    await supabase
      .from('marketplace_offers')
      .delete()
      .eq('originalOfferId', offerId);
    
  } catch (error) {
    console.error('Error deleting offer:', error);
    throw new Error('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¹Ø±Ø¶');
  }
}

/**
 * Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª
 * 
 * @param offerId - Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ø±Ø¶
 * @returns Promise<void>
 */
async function incrementOfferViews(offerId: string): Promise<void> {
  try {
    const { error } = await supabase.rpc('increment_offer_views', {
      offer_id: offerId
    });
    
    if (error) throw error;
    
  } catch (error) {
    console.error('Error incrementing views:', error);
    // Ù„Ø§ Ù†Ø±Ù…ÙŠ Ø®Ø·Ø£ Ù‡Ù†Ø§ Ù„Ø£Ù†Ù‡Ø§ Ø¹Ù…Ù„ÙŠØ© ØºÙŠØ± Ø­Ø±Ø¬Ø©
  }
}
```

### **API Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:**

```typescript
// ==========================================
// FILE: api/analytics.ts
// ==========================================

/**
 * Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ù†ØµØªÙŠ
 * 
 * @param userId - Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
 * @returns Promise<MyPlatformStats>
 */
export async function getMyPlatformStats(
  userId: string
): Promise<MyPlatformStats> {
  try {
    // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¯Ø§Ù„Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    const { data, error } = await supabase.rpc('get_my_platform_stats', {
      user_id: userId
    });
    
    if (error) throw error;
    
    const stats: MyPlatformStats = {
      offers: {
        total: data.total_offers || 0,
        active: data.active_offers || 0,
        pending: data.pending_offers || 0,
        accepted: data.accepted_offers || 0,
        expired: data.expired_offers || 0
      },
      requests: {
        total: data.total_requests || 0,
        active: data.active_requests || 0,
        fulfilled: data.fulfilled_requests || 0
      },
      platforms: {
        total: data.total_platforms || 0,
        connected: data.connected_platforms || 0,
        totalAds: data.total_ads || 0,
        totalViews: data.total_views || 0,
        totalInquiries: data.total_inquiries || 0
      },
      performance: {
        responseRate: data.response_rate || 0,
        conversionRate: data.conversion_rate || 0,
        averageResponseTime: data.avg_response_time || 0
      }
    };
    
    return stats;
    
  } catch (error) {
    console.error('Error fetching stats:', error);
    throw new Error('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª');
  }
}

/**
 * ØªØªØ¨Ø¹ Ø­Ø¯Ø«
 * 
 * @param event - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¯Ø«
 * @returns Promise<void>
 */
export async function trackEvent(event: {
  userId: string;
  eventType: string;
  eventName: string;
  category: string;
  properties?: Record<string, any>;
}): Promise<void> {
  try {
    const { error } = await supabase
      .from('analytics_events')
      .insert({
        userId: event.userId,
        eventType: event.eventType,
        eventName: event.eventName,
        category: event.category,
        properties: event.properties,
        createdAt: new Date().toISOString()
      });
    
    if (error) throw error;
    
  } catch (error) {
    console.error('Error tracking event:', error);
    // Ù„Ø§ Ù†Ø±Ù…ÙŠ Ø®Ø·Ø£ Ù„Ø£Ù† Ø§Ù„ØªØªØ¨Ø¹ ØºÙŠØ± Ø­Ø±Ø¬
  }
}
```

---

**(ÙŠØªØ¨Ø¹ ÙÙŠ Ø§Ù„Ù…Ù„Ù Ø§Ù„ØªØ§Ù„ÙŠ...)**
