# ğŸ“Š **ØªÙ‚Ø±ÙŠØ± ØªÙØµÙŠÙ„ÙŠ Ø´Ø§Ù…Ù„: Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª (Notifications)**

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                               â•‘
â•‘          ğŸ”” Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª - Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙƒØ§Ù…Ù„ ğŸ””             â•‘
â•‘                                                               â•‘
â•‘  ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ø§Ù„ØªÙØµÙŠÙ„: Ø§Ù„Ù…Ø³Ø§Ø±Ø§ØªØŒ Ø§Ù„Ø¯ÙˆØ§Ù„ØŒ Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§ØªØŒ            â•‘
â•‘  Ø§Ù„Ø±Ø¨Ø·ØŒ Ø§Ù„ØªØ¹Ø§Ø±ÙŠÙØŒ Ø§Ù„Ø£Ø²Ø±Ø§Ø±ØŒ Ø§Ù„Ø­Ù‚ÙˆÙ„ØŒ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¹Ù…Ù„              â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ“‹ **Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª**

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#1-Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
2. [Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª ÙˆØ§Ù„Ù…Ù„ÙØ§Øª](#2-Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª-ÙˆØ§Ù„Ù…Ù„ÙØ§Øª)
3. [Ø§Ù„ØªØ¹Ø§Ø±ÙŠÙ ÙˆØ§Ù„Ø£Ù†ÙˆØ§Ø¹](#3-Ø§Ù„ØªØ¹Ø§Ø±ÙŠÙ-ÙˆØ§Ù„Ø£Ù†ÙˆØ§Ø¹)
4. [Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯Ø§Øª](#4-Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯Ø§Øª)
5. [State Management](#5-state-management)
6. [Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©](#6-Ø§Ù„Ø¯ÙˆØ§Ù„-Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)
7. [Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª API](#7-Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª-api)
8. [Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰](#8-Ø§Ù„Ø±Ø¨Ø·-Ù…Ø¹-Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª-Ø§Ù„Ø£Ø®Ø±Ù‰)
9. [ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…](#9-ÙˆØ§Ø¬Ù‡Ø©-Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)
10. [Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª](#10-Ø£Ù†ÙˆØ§Ø¹-Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª)
11. [Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„](#11-Ø³ÙŠØ±-Ø§Ù„Ø¹Ù…Ù„)

---

## 1ï¸âƒ£ **Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©**

### **Ø§Ù„ØºØ±Ø¶ Ù…Ù† Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:**
Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù‡Ùˆ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù†:
- Ø¥Ø¹Ù„Ø§Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ù‡Ù…Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…
- Ø¹Ø±Ø¶ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©
- Ø¥Ø¯Ø§Ø±Ø© Ø­Ø§Ù„Ø© Ù‚Ø±Ø§Ø¡Ø©/Ø¹Ø¯Ù… Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª (Ù‚Ø±Ø§Ø¡Ø©ØŒ Ø­Ø°ÙØŒ ØªÙ†ÙÙŠØ° Ø¥Ø¬Ø±Ø§Ø¡)
- Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ (Real-time)

### **Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…:**
- **Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:** `NotificationSystem.tsx`
- **Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„ÙØ±Ø¹ÙŠ:** `NotificationSlider.tsx`
- **Hook:** `useNotifications.ts`
- **API:** `notifications-real.ts`
- **Ø§Ù„Ù†ÙˆØ¹:** Ù†Ø¸Ø§Ù… Ø¹Ø§Ù… (Global System)
- **Ø§Ù„ÙˆØµÙˆÙ„:** Ù…ØªØ§Ø­ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙØ­Ø§Øª

---

## 2ï¸âƒ£ **Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª ÙˆØ§Ù„Ù…Ù„ÙØ§Øª**

### **Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©:**

```
ğŸ“ Project Root
â”‚
â”œâ”€â”€ ğŸ“ components/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ notifications/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ NotificationSystem.tsx
â”‚   â”‚   â”‚   Ø§Ù„Ù…Ø³Ø§Ø±: /components/notifications/NotificationSystem.tsx
â”‚   â”‚   â”‚   Ø§Ù„Ø¯ÙˆØ±: Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
â”‚   â”‚   â”‚   Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:
â”‚   â”‚   â”‚     - NotificationButton (Ø²Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª)
â”‚   â”‚   â”‚     - NotificationDropdown (Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©)
â”‚   â”‚   â”‚     - NotificationList (Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª)
â”‚   â”‚   â”‚     - NotificationItem (Ø¹Ù†ØµØ± Ø¥Ø´Ø¹Ø§Ø± ÙˆØ§Ø­Ø¯)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ NotificationSlider.tsx
â”‚   â”‚   â”‚   Ø§Ù„Ù…Ø³Ø§Ø±: /components/notifications/NotificationSlider.tsx
â”‚   â”‚   â”‚   Ø§Ù„Ø¯ÙˆØ±: Ù„ÙˆØ­Ø© Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
â”‚   â”‚   â”‚   Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª:
â”‚   â”‚   â”‚     - Slider Container
â”‚   â”‚   â”‚     - Notification Groups (Ù…Ø¬Ù…ÙˆØ¹Ø§Øª)
â”‚   â”‚   â”‚     - Filter Tabs (ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„ØªØµÙÙŠØ©)
â”‚   â”‚   â”‚     - Actions (Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“„ UnreadIndicator.tsx
â”‚   â”‚       Ø§Ù„Ù…Ø³Ø§Ø±: /components/notifications/UnreadIndicator.tsx
â”‚   â”‚       Ø§Ù„Ø¯ÙˆØ±: Ù…Ø¤Ø´Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø© (Badge)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ SmartNotificationsPanel.tsx
â”‚       Ø§Ù„Ù…Ø³Ø§Ø±: /components/SmartNotificationsPanel.tsx
â”‚       Ø§Ù„Ø¯ÙˆØ±: Ù„ÙˆØ­Ø© Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø°ÙƒÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©
â”‚
â”œâ”€â”€ ğŸ“ hooks/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ useNotifications.ts
â”‚   â”‚   Ø§Ù„Ù…Ø³Ø§Ø±: /hooks/useNotifications.ts
â”‚   â”‚   Ø§Ù„Ø¯ÙˆØ±: Hook Ù…Ø®ØµØµ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
â”‚   â”‚   Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:
â”‚   â”‚     - addNotification() - Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø¹Ø§Ø±
â”‚   â”‚     - removeNotification() - Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø±
â”‚   â”‚     - markAsRead() - ØªØ­Ø¯ÙŠØ¯ ÙƒÙ…Ù‚Ø±ÙˆØ¡
â”‚   â”‚     - markAllAsRead() - ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡
â”‚   â”‚     - clearAll() - Ø­Ø°Ù Ø§Ù„ÙƒÙ„
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ useNotificationsAPI.ts
â”‚       Ø§Ù„Ù…Ø³Ø§Ø±: /hooks/useNotificationsAPI.ts
â”‚       Ø§Ù„Ø¯ÙˆØ±: Hook Ù„Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ API Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
â”‚
â”œâ”€â”€ ğŸ“ api/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“„ notifications-real.ts
â”‚   â”‚   Ø§Ù„Ù…Ø³Ø§Ø±: /api/notifications-real.ts
â”‚   â”‚   Ø§Ù„Ø¯ÙˆØ±: API Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠ (ÙŠØ³ØªØ®Ø¯Ù… Supabase)
â”‚   â”‚   Ø§Ù„ÙˆØ¸Ø§Ø¦Ù:
â”‚   â”‚     - fetchNotifications()
â”‚   â”‚     - createNotification()
â”‚   â”‚     - markNotificationAsRead()
â”‚   â”‚     - deleteNotification()
â”‚   â”‚     - subscribeToNotifications()
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ notifications.js
â”‚       Ø§Ù„Ù…Ø³Ø§Ø±: /api/notifications.js
â”‚       Ø§Ù„Ø¯ÙˆØ±: API Ø§Ø­ØªÙŠØ§Ø·ÙŠ (Mock/Fallback)
â”‚
â”œâ”€â”€ ğŸ“ types/
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“„ notifications.ts
â”‚       Ø§Ù„Ù…Ø³Ø§Ø±: /types/notifications.ts (ÙŠÙÙ†Ø´Ø£ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©)
â”‚       Ø§Ù„Ø¯ÙˆØ±: ØªØ¹Ø§Ø±ÙŠÙ TypeScript Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
â”‚
â””â”€â”€ ğŸ“ utils/
    â”‚
    â”œâ”€â”€ ğŸ“„ notificationsSystem.ts
    â”‚   Ø§Ù„Ù…Ø³Ø§Ø±: /utils/notificationsSystem.ts
    â”‚   Ø§Ù„Ø¯ÙˆØ±: Utilities Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
    â”‚
    â””â”€â”€ ğŸ“„ notificationsIntegration.ts
        Ø§Ù„Ù…Ø³Ø§Ø±: /utils/notificationsIntegration.ts
        Ø§Ù„Ø¯ÙˆØ±: Ø¯Ù…Ø¬ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø¹ Ø£Ù†Ø¸Ù…Ø© Ø£Ø®Ø±Ù‰
```

---

## 3ï¸âƒ£ **Ø§Ù„ØªØ¹Ø§Ø±ÙŠÙ ÙˆØ§Ù„Ø£Ù†ÙˆØ§Ø¹**

### **Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:**

```typescript
// ==========================================
// FILE: types/notifications.ts (Ø£Ùˆ ÙÙŠ Ø§Ù„Ù…ÙƒÙˆÙ†)
// ==========================================

/**
 * Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
 */
export type NotificationType =
  | 'info'        // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø©
  | 'success'     // Ù†Ø¬Ø§Ø­ Ø¹Ù…Ù„ÙŠØ©
  | 'warning'     // ØªØ­Ø°ÙŠØ±
  | 'error'       // Ø®Ø·Ø£
  | 'reminder'    // ØªØ°ÙƒÙŠØ±
  | 'system'      // Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¸Ø§Ù…
  | 'offer'       // Ø¥Ø´Ø¹Ø§Ø± Ù…ØªØ¹Ù„Ù‚ Ø¨Ø¹Ø±Ø¶
  | 'request'     // Ø¥Ø´Ø¹Ø§Ø± Ù…ØªØ¹Ù„Ù‚ Ø¨Ø·Ù„Ø¨
  | 'appointment' // Ø¥Ø´Ø¹Ø§Ø± Ù…ØªØ¹Ù„Ù‚ Ø¨Ù…ÙˆØ¹Ø¯
  | 'message';    // Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©

/**
 * Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
 */
export type NotificationPriority =
  | 'low'       // Ù…Ù†Ø®ÙØ¶Ø©
  | 'medium'    // Ù…ØªÙˆØ³Ø·Ø©
  | 'high'      // Ø¹Ø§Ù„ÙŠØ©
  | 'urgent';   // Ø¹Ø§Ø¬Ù„Ø©

/**
 * Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
 */
export type NotificationStatus =
  | 'unread'    // ØºÙŠØ± Ù…Ù‚Ø±ÙˆØ¡
  | 'read'      // Ù…Ù‚Ø±ÙˆØ¡
  | 'archived'; // Ù…Ø¤Ø±Ø´Ù

/**
 * Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
 */
export interface NotificationAction {
  // Ù†Øµ Ø§Ù„Ø²Ø±
  label: string;
  
  // Ø§Ù„Ù„ÙˆÙ† (primary, secondary, success, danger)
  variant?: 'primary' | 'secondary' | 'success' | 'danger';
  
  // Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙŠ ØªÙÙ†ÙØ° Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
  onClick: () => void | Promise<void>;
  
  // Ù‡Ù„ ÙŠØºÙ„Ù‚ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ°ØŸ
  closeOnClick?: boolean;
}

/**
 * Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±
 */
export interface NotificationMetadata {
  // Ù…Ø¹Ø±Ù Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø±ØªØ¨Ø· (Ø¹Ø±Ø¶ØŒ Ø·Ù„Ø¨ØŒ Ù…ÙˆØ¹Ø¯ØŒ Ø¥Ù„Ø®)
  relatedId?: string;
  
  // Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…Ø±ØªØ¨Ø·
  relatedType?: 'offer' | 'request' | 'appointment' | 'user' | 'sale';
  
  // Ø±Ø§Ø¨Ø· Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„ÙŠÙ‡ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
  link?: string;
  
  // ØµÙˆØ±Ø© Ù…Ø±ÙÙ‚Ø©
  image?: string;
  
  // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ø®ØµØµØ©
  icon?: string;
  
  // Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù…Ø®ØµØµØ©
  customData?: Record<string, any>;
}

/**
 * ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„Ø©
 */
export interface Notification {
  // Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„ÙØ±ÙŠØ¯
  id: string;
  
  // Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„
  userId: string;
  
  // Ø§Ù„Ù†ÙˆØ¹
  type: NotificationType;
  
  // Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
  priority: NotificationPriority;
  
  // Ø§Ù„Ø­Ø§Ù„Ø©
  status: NotificationStatus;
  
  // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
  title: string;
  
  // Ø§Ù„Ø±Ø³Ø§Ù„Ø©
  message: string;
  
  // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
  metadata?: NotificationMetadata;
  
  // Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©
  actions?: NotificationAction[];
  
  // Ù‡Ù„ ÙŠÙ…ÙƒÙ† Ø­Ø°ÙÙ‡ØŸ
  dismissible?: boolean;
  
  // Ù‡Ù„ ÙŠÙØ¹Ø±Ø¶ ÙƒÙ€ ToastØŸ
  showAsToast?: boolean;
  
  // Ù…Ø¯Ø© Ø¹Ø±Ø¶ Toast (Ø¨Ø§Ù„Ù…ÙŠÙ„ÙŠ Ø«Ø§Ù†ÙŠØ©)
  toastDuration?: number;
  
  // Ù‡Ù„ ÙŠÙØ´ØºÙ„ ØµÙˆØªØŸ
  playSound?: boolean;
  
  // Ù‡Ù„ ÙŠÙØ´ØºÙ„ Ø§Ù‡ØªØ²Ø§Ø²ØŸ
  vibrate?: boolean;
  
  // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
  createdAt: Date;
  
  // ØªØ§Ø±ÙŠØ® Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©
  readAt?: Date;
  
  // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ø±Ø´ÙØ©
  archivedAt?: Date;
  
  // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
  expiresAt?: Date;
}

/**
 * Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
 */
export interface NotificationGroup {
  // Ø§Ø³Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
  name: string;
  
  // Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
  title: string;
  
  // Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
  notifications: Notification[];
  
  // Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©
  unreadCount: number;
}

/**
 * ØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
 */
export interface NotificationPreferences {
  // Ù‡Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…ÙØ¹Ù„Ø©ØŸ
  enabled: boolean;
  
  // Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨
  desktopNotifications: boolean;
  
  // Ø§Ù„Ø£ØµÙˆØ§Øª
  soundEnabled: boolean;
  
  // Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²
  vibrationEnabled: boolean;
  
  // ØªÙØ¶ÙŠÙ„Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
  typePreferences: {
    [key in NotificationType]?: {
      enabled: boolean;
      showAsToast: boolean;
      playSound: boolean;
    };
  };
}

/**
 * Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
 */
export interface NotificationStats {
  // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
  total: number;
  
  // ØºÙŠØ± Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©
  unread: number;
  
  // Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©
  read: number;
  
  // Ø§Ù„Ù…Ø¤Ø±Ø´ÙØ©
  archived: number;
  
  // Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
  byType: {
    [key in NotificationType]?: number;
  };
  
  // Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
  byPriority: {
    [key in NotificationPriority]?: number;
  };
}
```

---

## 4ï¸âƒ£ **Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯Ø§Øª**

### **Ø§Ø³ØªÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:**

```typescript
// ==========================================
// FILE: components/notifications/NotificationSystem.tsx
// ==========================================

// React Core
import React, { 
  useState, 
  useEffect, 
  useCallback, 
  useMemo,
  useRef 
} from 'react';

// UI Components (shadcn/ui)
import { 
  Popover, 
  PopoverContent, 
  PopoverTrigger 
} from '../ui/popover';
import { Button } from '../ui/button';
import { Badge } from '../ui/badge';
import { ScrollArea } from '../ui/scroll-area';
import { Separator } from '../ui/separator';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '../ui/tabs';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from '../ui/dropdown-menu';

// Icons (lucide-react)
import {
  Bell,              // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¬Ø±Ø³
  BellOff,           // Ø¬Ø±Ø³ Ù…Ø·ÙØ£
  Check,             // Ø¹Ù„Ø§Ù…Ø© ØµØ­
  CheckCheck,        // Ø¹Ù„Ø§Ù…ØªØ§Ù† ØµØ­ (Ù…Ù‚Ø±ÙˆØ¡)
  X,                 // Ø¥ØºÙ„Ø§Ù‚
  Trash2,            // Ø­Ø°Ù
  Archive,           // Ø£Ø±Ø´ÙØ©
  Settings,          // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
  Filter,            // ØªØµÙÙŠØ©
  ChevronDown,       // Ø³Ù‡Ù… Ù„Ø£Ø³ÙÙ„
  Circle,            // Ø¯Ø§Ø¦Ø±Ø©
  AlertCircle,       // Ø¯Ø§Ø¦Ø±Ø© ØªÙ†Ø¨ÙŠÙ‡
  Info,              // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
  CheckCircle,       // Ø¯Ø§Ø¦Ø±Ø© Ù…Ø¹ ØµØ­
  XCircle,           // Ø¯Ø§Ø¦Ø±Ø© Ù…Ø¹ X
  Clock,             // Ø³Ø§Ø¹Ø©
  MessageSquare,     // Ø±Ø³Ø§Ù„Ø©
  Calendar,          // ØªÙ‚ÙˆÙŠÙ…
  Home,              // Ù…Ù†Ø²Ù„
  FileText,          // Ù…Ù„Ù Ù†ØµÙŠ
  MoreVertical       // Ø«Ù„Ø§Ø« Ù†Ù‚Ø§Ø· Ø¹Ù…ÙˆØ¯ÙŠØ©
} from 'lucide-react';

// Toast Notifications
import { toast } from 'sonner';

// Custom Hooks
import { useNotifications } from '../../hooks/useNotifications';
import { useAuth } from '../../hooks/useAuth';

// API
import {
  fetchNotifications,
  markNotificationAsRead,
  markAllNotificationsAsRead,
  deleteNotification,
  archiveNotification,
  subscribeToNotifications
} from '../../api/notifications-real';

// Types
import type {
  Notification,
  NotificationType,
  NotificationPriority,
  NotificationStatus,
  NotificationGroup,
  NotificationStats
} from '../../types/notifications';

// Utils
import { cn } from '../../lib/utils';
import { formatDistanceToNow } from 'date-fns';
import { ar } from 'date-fns/locale';
```

---

## 5ï¸âƒ£ **State Management**

### **State Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:**

```typescript
// ==========================================
// State ÙÙŠ NotificationSystem
// ==========================================

export function NotificationSystem() {
  // ===== 1. Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª =====
  
  /**
   * Ù‚Ø§Ø¦Ù…Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
   */
  const [notifications, setNotifications] = useState<Notification[]>([]);
  
  /**
   * Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯ Ø­Ø§Ù„ÙŠØ§Ù‹ (Ù„Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ)
   */
  const [selectedNotification, setSelectedNotification] = useState<Notification | null>(null);
  
  /**
   * Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
   */
  const [stats, setStats] = useState<NotificationStats>({
    total: 0,
    unread: 0,
    read: 0,
    archived: 0,
    byType: {},
    byPriority: {}
  });
  
  // ===== 2. Ø­Ø§Ù„Ø© ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… =====
  
  /**
   * Ù‡Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© Ù…ÙØªÙˆØ­Ø©ØŸ
   */
  const [isOpen, setIsOpen] = useState<boolean>(false);
  
  /**
   * Ø§Ù„ÙÙ„ØªØ± Ø§Ù„Ù†Ø´Ø·
   * Ø§Ù„Ù‚ÙŠÙ…: 'all' | 'unread' | 'read' | 'archived' | NotificationType
   */
  const [activeFilter, setActiveFilter] = useState<string>('all');
  
  /**
   * ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ø±Ø¶
   * Ø§Ù„Ù‚ÙŠÙ…: 'newest' | 'oldest' | 'priority' | 'unread-first'
   */
  const [sortBy, setSortBy] = useState<string>('newest');
  
  /**
   * Ù‡Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ØªØ¹Ø¯Ø¯ØŸ
   */
  const [isSelectionMode, setIsSelectionMode] = useState<boolean>(false);
  
  /**
   * Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© (ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ØªØ¹Ø¯Ø¯)
   */
  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());
  
  // ===== 3. Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© =====
  
  /**
   * Ù‡Ù„ ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§ØªØŸ
   */
  const [isLoading, setIsLoading] = useState<boolean>(true);
  
  /**
   * Ù‡Ù„ ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¹Ù…Ù„ÙŠØ©ØŸ
   */
  const [isProcessing, setIsProcessing] = useState<boolean>(false);
  
  /**
   * Ù…Ø¹Ø±ÙØ§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
   */
  const [processingIds, setProcessingIds] = useState<Set<string>>(new Set());
  
  // ===== 4. Real-time Subscription =====
  
  /**
   * Ù…Ø±Ø¬Ø¹ Ù„Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ
   */
  const subscriptionRef = useRef<any>(null);
  
  /**
   * Ù…Ø±Ø¬Ø¹ Ù„ØµÙˆØª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
   */
  const audioRef = useRef<HTMLAudioElement | null>(null);
  
  // ===== 5. Custom Hooks =====
  
  /**
   * Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
   */
  const { user } = useAuth();
  
  /**
   * Hook Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
   */
  const { 
    addNotification: addLocalNotification,
    notifications: localNotifications 
  } = useNotifications();
  
  // ===== 6. Computed Values =====
  
  /**
   * Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©
   */
  const unreadCount = useMemo(() => {
    return notifications.filter(n => n.status === 'unread').length;
  }, [notifications]);
  
  /**
   * Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙÙ„ØªØ±Ø©
   */
  const filteredNotifications = useMemo(() => {
    let result = [...notifications];
    
    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±
    switch (activeFilter) {
      case 'unread':
        result = result.filter(n => n.status === 'unread');
        break;
      case 'read':
        result = result.filter(n => n.status === 'read');
        break;
      case 'archived':
        result = result.filter(n => n.status === 'archived');
        break;
      case 'all':
        result = result.filter(n => n.status !== 'archived');
        break;
      default:
        // ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
        if (activeFilter as NotificationType) {
          result = result.filter(n => n.type === activeFilter);
        }
    }
    
    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ±ØªÙŠØ¨
    switch (sortBy) {
      case 'newest':
        result.sort((a, b) => 
          new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
        );
        break;
      case 'oldest':
        result.sort((a, b) => 
          new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()
        );
        break;
      case 'priority':
        const priorityOrder = { urgent: 0, high: 1, medium: 2, low: 3 };
        result.sort((a, b) => 
          priorityOrder[a.priority] - priorityOrder[b.priority]
        );
        break;
      case 'unread-first':
        result.sort((a, b) => {
          if (a.status === 'unread' && b.status !== 'unread') return -1;
          if (a.status !== 'unread' && b.status === 'unread') return 1;
          return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();
        });
        break;
    }
    
    return result;
  }, [notifications, activeFilter, sortBy]);
  
  /**
   * Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø¬Ù…Ø¹Ø© Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
   */
  const groupedNotifications = useMemo(() => {
    const groups: NotificationGroup[] = [];
    
    const today: Notification[] = [];
    const yesterday: Notification[] = [];
    const thisWeek: Notification[] = [];
    const older: Notification[] = [];
    
    const now = new Date();
    const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    const yesterdayStart = new Date(todayStart);
    yesterdayStart.setDate(yesterdayStart.getDate() - 1);
    const weekStart = new Date(todayStart);
    weekStart.setDate(weekStart.getDate() - 7);
    
    filteredNotifications.forEach(notification => {
      const notifDate = new Date(notification.createdAt);
      
      if (notifDate >= todayStart) {
        today.push(notification);
      } else if (notifDate >= yesterdayStart) {
        yesterday.push(notification);
      } else if (notifDate >= weekStart) {
        thisWeek.push(notification);
      } else {
        older.push(notification);
      }
    });
    
    if (today.length > 0) {
      groups.push({
        name: 'today',
        title: 'Ø§Ù„ÙŠÙˆÙ…',
        notifications: today,
        unreadCount: today.filter(n => n.status === 'unread').length
      });
    }
    
    if (yesterday.length > 0) {
      groups.push({
        name: 'yesterday',
        title: 'Ø£Ù…Ø³',
        notifications: yesterday,
        unreadCount: yesterday.filter(n => n.status === 'unread').length
      });
    }
    
    if (thisWeek.length > 0) {
      groups.push({
        name: 'this-week',
        title: 'Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹',
        notifications: thisWeek,
        unreadCount: thisWeek.filter(n => n.status === 'unread').length
      });
    }
    
    if (older.length > 0) {
      groups.push({
        name: 'older',
        title: 'Ø£Ù‚Ø¯Ù…',
        notifications: older,
        unreadCount: older.filter(n => n.status === 'unread').length
      });
    }
    
    return groups;
  }, [filteredNotifications]);
}
```

---

## 6ï¸âƒ£ **Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©**

### **Ø¯ÙˆØ§Ù„ Ø¬Ù„Ø¨ ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:**

```typescript
// ==========================================
// Notification Management Functions
// ==========================================

/**
 * Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
 */
const loadNotifications = useCallback(async () => {
  try {
    setIsLoading(true);
    
    // Ø¬Ù„Ø¨ Ù…Ù† API
    const data = await fetchNotifications(user.id);
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ State
    setNotifications(data);
    
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    const stats: NotificationStats = {
      total: data.length,
      unread: data.filter(n => n.status === 'unread').length,
      read: data.filter(n => n.status === 'read').length,
      archived: data.filter(n => n.status === 'archived').length,
      byType: {},
      byPriority: {}
    };
    
    // Ø­Ø³Ø§Ø¨ Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
    data.forEach(n => {
      stats.byType[n.type] = (stats.byType[n.type] || 0) + 1;
      stats.byPriority[n.priority] = (stats.byPriority[n.priority] || 0) + 1;
    });
    
    setStats(stats);
    
  } catch (error) {
    console.error('Error loading notifications:', error);
    toast.error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª');
  } finally {
    setIsLoading(false);
  }
}, [user.id]);

/**
 * ØªØ­Ø¯ÙŠØ¯ Ø¥Ø´Ø¹Ø§Ø± ÙƒÙ…Ù‚Ø±ÙˆØ¡
 */
const handleMarkAsRead = useCallback(async (notificationId: string) => {
  try {
    // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
    setProcessingIds(prev => new Set(prev).add(notificationId));
    
    // ØªØ­Ø¯ÙŠØ« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    await markNotificationAsRead(notificationId);
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ State Ø§Ù„Ù…Ø­Ù„ÙŠ
    setNotifications(prev =>
      prev.map(n =>
        n.id === notificationId
          ? { ...n, status: 'read', readAt: new Date() }
          : n
      )
    );
    
  } catch (error) {
    console.error('Error marking as read:', error);
    toast.error('ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±');
  } finally {
    // Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
    setProcessingIds(prev => {
      const newSet = new Set(prev);
      newSet.delete(notificationId);
      return newSet;
    });
  }
}, []);

/**
 * ØªØ­Ø¯ÙŠØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙƒÙ…Ù‚Ø±ÙˆØ¡Ø©
 */
const handleMarkAllAsRead = useCallback(async () => {
  try {
    setIsProcessing(true);
    
    // Ø¬Ù„Ø¨ Ù…Ø¹Ø±ÙØ§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©
    const unreadIds = notifications
      .filter(n => n.status === 'unread')
      .map(n => n.id);
    
    if (unreadIds.length === 0) {
      toast.info('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØºÙŠØ± Ù…Ù‚Ø±ÙˆØ¡Ø©');
      return;
    }
    
    // ØªØ­Ø¯ÙŠØ« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    await markAllNotificationsAsRead(user.id);
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ State Ø§Ù„Ù…Ø­Ù„ÙŠ
    setNotifications(prev =>
      prev.map(n =>
        n.status === 'unread'
          ? { ...n, status: 'read', readAt: new Date() }
          : n
      )
    );
    
    toast.success(`ØªÙ… ØªØ­Ø¯ÙŠØ¯ ${unreadIds.length} Ø¥Ø´Ø¹Ø§Ø± ÙƒÙ…Ù‚Ø±ÙˆØ¡`);
    
  } catch (error) {
    console.error('Error marking all as read:', error);
    toast.error('ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª');
  } finally {
    setIsProcessing(false);
  }
}, [notifications, user.id]);

/**
 * Ø­Ø°Ù Ø¥Ø´Ø¹Ø§Ø±
 */
const handleDeleteNotification = useCallback(async (notificationId: string) => {
  try {
    setProcessingIds(prev => new Set(prev).add(notificationId));
    
    // Ø­Ø°Ù Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    await deleteNotification(notificationId);
    
    // Ø­Ø°Ù Ù…Ù† Ø§Ù„Ù€ State Ø§Ù„Ù…Ø­Ù„ÙŠ
    setNotifications(prev => prev.filter(n => n.id !== notificationId));
    
    toast.success('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±');
    
  } catch (error) {
    console.error('Error deleting notification:', error);
    toast.error('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±');
  } finally {
    setProcessingIds(prev => {
      const newSet = new Set(prev);
      newSet.delete(notificationId);
      return newSet;
    });
  }
}, []);

/**
 * Ø£Ø±Ø´ÙØ© Ø¥Ø´Ø¹Ø§Ø±
 */
const handleArchiveNotification = useCallback(async (notificationId: string) => {
  try {
    setProcessingIds(prev => new Set(prev).add(notificationId));
    
    await archiveNotification(notificationId);
    
    setNotifications(prev =>
      prev.map(n =>
        n.id === notificationId
          ? { ...n, status: 'archived', archivedAt: new Date() }
          : n
      )
    );
    
    toast.success('ØªÙ… Ø£Ø±Ø´ÙØ© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±');
    
  } catch (error) {
    console.error('Error archiving notification:', error);
    toast.error('ÙØ´Ù„ ÙÙŠ Ø£Ø±Ø´ÙØ© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±');
  } finally {
    setProcessingIds(prev => {
      const newSet = new Set(prev);
      newSet.delete(notificationId);
      return newSet;
    });
  }
}, []);

/**
 * Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©
 */
const handleClearRead = useCallback(async () => {
  const readIds = notifications
    .filter(n => n.status === 'read')
    .map(n => n.id);
  
  if (readIds.length === 0) {
    toast.info('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù‚Ø±ÙˆØ¡Ø©');
    return;
  }
  
  const confirmed = window.confirm(
    `Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù ${readIds.length} Ø¥Ø´Ø¹Ø§Ø± Ù…Ù‚Ø±ÙˆØ¡ØŸ`
  );
  
  if (!confirmed) return;
  
  try {
    setIsProcessing(true);
    
    // Ø­Ø°Ù Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    await Promise.all(readIds.map(id => deleteNotification(id)));
    
    // Ø­Ø°Ù Ù…Ù† Ø§Ù„Ù€ State Ø§Ù„Ù…Ø­Ù„ÙŠ
    setNotifications(prev => prev.filter(n => n.status !== 'read'));
    
    toast.success(`ØªÙ… Ø­Ø°Ù ${readIds.length} Ø¥Ø´Ø¹Ø§Ø±`);
    
  } catch (error) {
    console.error('Error clearing read:', error);
    toast.error('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª');
  } finally {
    setIsProcessing(false);
  }
}, [notifications]);

/**
 * Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø¥Ø´Ø¹Ø§Ø±
 */
const handleNotificationClick = useCallback(async (notification: Notification) => {
  // ØªØ­Ø¯ÙŠØ¯ ÙƒÙ…Ù‚Ø±ÙˆØ¡ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ù‚Ø±ÙˆØ¡Ø§Ù‹
  if (notification.status === 'unread') {
    await handleMarkAsRead(notification.id);
  }
  
  // ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ù…Ø®ØµØµ Ø¥Ø°Ø§ ÙˆØ¬Ø¯
  if (notification.metadata?.link) {
    window.location.href = notification.metadata.link;
  } else if (notification.metadata?.relatedId) {
    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©
    const type = notification.metadata.relatedType;
    switch (type) {
      case 'offer':
        window.location.href = `/offers/${notification.metadata.relatedId}`;
        break;
      case 'request':
        window.location.href = `/requests/${notification.metadata.relatedId}`;
        break;
      case 'appointment':
        window.location.href = `/calendar/${notification.metadata.relatedId}`;
        break;
      default:
        break;
    }
  }
  
  // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
  setIsOpen(false);
}, [handleMarkAsRead]);
```

---

**(ÙŠØªØ¨Ø¹ ÙÙŠ Ø§Ù„Ù…Ù„Ù Ø§Ù„ØªØ§Ù„ÙŠ...)**
