@custom-variant dark (&:is(.dark *));

:root {
  --font-size: 16px;
  --background: #ffffff;
  --foreground: #01411C;
  --card: #ffffff;
  --card-foreground: #01411C;
  --popover: #ffffff;
  --popover-foreground: #01411C;
  --primary: #01411C;
  --primary-foreground: #ffffff;
  --secondary: #f0fdf4;
  --secondary-foreground: #01411C;
  --muted: #f0fdf4;
  --muted-foreground: #065f41;
  --accent: #D4AF37;
  --accent-foreground: #01411C;
  --destructive: #d4183d;
  --destructive-foreground: #ffffff;
  --border: #D4AF37;
  --input: transparent;
  --input-background: rgba(255, 255, 255, 0.9);
  --switch-background: #D4AF37;
  --font-weight-medium: 500;
  --font-weight-normal: 400;
  --ring: #D4AF37;
  --chart-1: #01411C;
  --chart-2: #065f41;
  --chart-3: #D4AF37;
  --chart-4: #f0fdf4;
  --chart-5: #fffef7;
  --radius: 0.625rem;
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.145 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.145 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.985 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.396 0.141 25.723);
  --destructive-foreground: oklch(0.637 0.237 25.331);
  --border: oklch(0.269 0 0);
  --input: oklch(0.269 0 0);
  --ring: oklch(0.439 0 0);
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-input-background: var(--input-background);
  --color-switch-background: var(--switch-background);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-gold-DEFAULT: #D4AF37;
  --color-gold-50: #fffef7;
  --color-gold-100: #fef9e7;
  --color-gold-200: #fdf3cf;
  --color-gold-300: #fbecb7;
  --color-gold-400: #f9e69f;
  --color-gold-500: #D4AF37;
  --color-gold-600: #b8941f;
  --color-gold-700: #9c7a19;
  --color-gold-800: #806013;
  --color-gold-900: #64460d;
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* خطوط عربية - محسنة للأداء */
@import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap&subset=arabic');

html {
  font-size: var(--font-size);
  direction: rtl;
}

body {
  font-family: 'Tajawal', 'Dubai', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

/* Typography الأساسية */
@layer base {
  :where(:not(:has([class*=" text-"]), :not(:has([class^="text-"])))) {
    h1 {
      font-size: 1.5rem;
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    h2 {
      font-size: 1.25rem;
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    h3 {
      font-size: 1.125rem;
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    h4 {
      font-size: 1rem;
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }
  }

  /* Utility classes for form elements */
  .input {
    @apply w-full px-3 py-2 border border-border rounded-md bg-input-background focus:outline-none focus:ring-2 focus:ring-ring;
  }

  .btn {
    @apply px-4 py-2 bg-primary text-primary-foreground rounded-md hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-ring;
  }

  .btn-ghost {
    @apply px-4 py-2 bg-transparent text-foreground border border-border rounded-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring;

    p {
      font-size: 1rem;
      font-weight: var(--font-weight-normal);
      line-height: 1.5;
    }

    label {
      font-size: 1rem;
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    button {
      font-size: 1rem;
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    input {
      font-size: 1rem;
      font-weight: var(--font-weight-normal);
      line-height: 1.5;
    }
  }
}

/* إضافات RTL وتحسينات أساسية */
@layer utilities {
  /* RTL Support */
  .rtl-container {
    @apply text-right;
    direction: rtl;
  }
  
  [dir="rtl"] {
    direction: rtl;
  }
  
  [dir="rtl"] .space-x-2 > :not([hidden]) ~ :not([hidden]) {
    --tw-space-x-reverse: 1;
  }

  /* ألوان المشروع */
  .royal-green {
    color: #01411C;
  }
  
  .royal-green-bg {
    background-color: #01411C;
  }
  
  .gold {
    color: #D4AF37;
  }
  
  .gold-bg {
    background-color: #D4AF37;
  }
  
  .gold-border {
    border-color: #D4AF37;
  }

  /* تحسينات الشاشات المختلفة - مبسطة */
  @media (max-width: 640px) {
    .container { padding-left: 1rem; padding-right: 1rem; }
    .card { margin-left: 0.5rem; margin-right: 0.5rem; }
    .input { font-size: 16px; } /* منع الزوم في iOS */
  }
  
  @media (min-width: 641px) and (max-width: 1024px) {
    .container { padding-left: 1.5rem; padding-right: 1.5rem; }
  }
  
  @media (min-width: 1025px) {
    .container { padding-left: 2rem; padding-right: 2rem; }
  }

  /* تحسين اللمس للأجهزة المحمولة */
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
  
  /* تأثير بصري للإعلان المحدد عبر URL */
  @keyframes highlight-pulse {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.7);
      transform: scale(1);
    }
    50% {
      box-shadow: 0 0 0 20px rgba(212, 175, 55, 0);
      transform: scale(1.02);
    }
  }

  /* تفعيل التمرير والسحب العمودي */
  .touch-scroll-enabled {
    touch-action: pan-y pan-x;
    -webkit-overflow-scrolling: touch;
    overflow-y: auto;
    overflow-x: hidden;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .touch-scroll-enabled::-webkit-scrollbar {
    display: none;
  }

  /* تفعيل السحب العمودي فقط */
  .touch-pan-y {
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
  }

  /* تفعيل السحب الأفقي للشريط الجانبي */
  .touch-pan-x {
    touch-action: pan-x;
    -webkit-overflow-scrolling: touch;
  }

  /* إعدادات عامة للتطبيق - محسنة */
  body, html {
    -webkit-overflow-scrolling: touch;
    overflow-x: hidden;
    height: 100%;
  }

  /* تفعيل السحب لجميع أجهزة اللمس */
  * {
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
  }

  /* إخفاء الشريط الجانبي (scrollbar) مع الحفاظ على اللمس */
  .hide-scrollbar {
    -ms-overflow-style: none;  /* Internet Explorer 10+ */
    scrollbar-width: none;  /* Firefox */
  }
  
  .hide-scrollbar::-webkit-scrollbar {
    display: none;  /* Chrome, Safari, Edge */
  }
  
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
    -webkit-overflow-scrolling: touch;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  .touch-scroll-x {
    overflow-x: auto;
    overflow-y: visible;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    overscroll-behavior-x: contain;
  }

  /* Safe Area للجوال (iPhone X وأحدث) */
  .safe-area-top {
    padding-top: max(1rem, env(safe-area-inset-top));
  }

  .pb-safe {
    padding-bottom: max(1.5rem, env(safe-area-inset-bottom));
  }

  .pt-safe {
    padding-top: max(1rem, env(safe-area-inset-top));
  }
  
  .hide-scrollbar::-webkit-scrollbar {
    display: none;  /* Safari and Chrome */
  }

  /* تطبيق إخفاء scrollbar على العناصر الأساسية */
  body, html {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  body::-webkit-scrollbar,
  html::-webkit-scrollbar {
    display: none;
  }

  /* تحسين التمرير للحاويات */
  .scrollable-container {
    touch-action: auto;
    -webkit-overflow-scrolling: touch;
    overflow-y: auto;
    overflow-x: hidden;
    scroll-behavior: smooth;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollable-container::-webkit-scrollbar {
    display: none;
  }

  /* تمرير سلس بالسحب للكامل - مبسط وفعال */
  .touch-scroll-smooth {
    -webkit-overflow-scrolling: touch;
    -ms-overflow-style: none;
    scrollbar-width: none;
    overflow-y: auto;
    overflow-x: hidden;
  }
  
  .touch-scroll-smooth::-webkit-scrollbar {
    display: none;
  }

  /* للحاويات التي تحتاج تمرير أفقي */
  .touch-scroll-horizontal {
    touch-action: pan-x;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    -ms-overflow-style: none;
    scrollbar-width: none;
    overflow-x: auto;
    overflow-y: hidden;
  }
  
  .touch-scroll-horizontal::-webkit-scrollbar {
    display: none;
  }

  /* تحسينات خاصة بأجهزة اللمس */
  @media (hover: none) and (pointer: coarse) {
    /* للأجهزة اللوحية والهواتف */
    body, html {
      overscroll-behavior: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    /* إخفاء كل شرائط التمرير في أجهزة اللمس */
    *::-webkit-scrollbar {
      display: none;
    }
    
    * {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    /* تحسينات خاصة للرايت سلايدر في أجهزة اللمس */
    .right-slider-enhanced {
      touch-action: pan-y pinch-zoom;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
      scroll-snap-type: y proximity;
    }

    .full-scroll-container {
      scroll-snap-type: y proximity;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
    }

    /* تحسين النقر والسحب للعناصر التفاعلية */
    .dynamic-header {
      scroll-snap-align: start;
    }
  }

  /* تحسينات momentum scrolling لـ iOS */
  .momentum-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
    scroll-behavior: smooth;
  }
  
  /* منع التكبير غير المرغوب فيه في iOS مع الحفاظ على اللمس */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="password"],
  textarea,
  select {
    font-size: 16px !important;
    touch-action: manipulation;
  }
  
  @media (min-width: 640px) {
    input[type="text"],
    input[type="email"], 
    input[type="tel"],
    input[type="password"],
    textarea,
    select {
      font-size: 14px !important;
    }
  }

  /* أزرار محسنة للمس */
  .btn-touch {
    min-height: 44px;
    min-width: 44px;
    padding: 12px 16px;
    border-radius: 8px;
    font-weight: 500;
    transition: all 0.2s ease;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  
  .btn-touch:active {
    transform: scale(0.95);
  }

  /* تحسينات الباقات للموبايل والكمبيوتر */
  .pricing-card {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  .pricing-card .btn-touch {
    width: 100%;
    margin-top: auto;
  }

  /* تحسينات التخطيط المتجاوب للباقات */
  @media (max-width: 767px) {
    .pricing-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
      padding: 0 1rem;
    }
    
    .pricing-card {
      margin-bottom: 1rem;
    }
    
    .pricing-card .card-content {
      padding: 1rem;
    }
    
    .pricing-card .btn-touch {
      margin-top: 1rem;
      padding: 0.75rem 1rem;
    }
  }

  @media (min-width: 768px) and (max-width: 1023px) {
    .pricing-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 2rem;
      padding: 0 1.5rem;
    }
  }

  @media (min-width: 1024px) {
    .pricing-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      padding: 0 2rem;
    }
  }

  @media (min-width: 1280px) {
    .pricing-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  /* تحسينات خاصة بنماذج التسجيل */
  .registration-grid-2x2 {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    max-width: 600px;
    margin: 0 auto;
  }

  @media (min-width: 768px) {
    .registration-grid-2x2 {
      gap: 2rem;
      max-width: 800px;
    }
  }

  /* تأثيرات تفاعلية محسنة */
  .account-type-card {
    cursor: pointer;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
  }

  .account-type-card:focus {
    outline: 3px solid rgba(212, 175, 55, 0.5);
    outline-offset: 2px;
  }

  /* تحسينات للانتقالات والحركات */
  .page-transition {
    animation: fadeIn 0.5s ease-in-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* تحسين عرض البطاقات */
  .card-hover-effect {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .card-hover-effect:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  }

  /* تأثيرات تفاعلية للأزرار */
  .btn-primary-enhanced {
    background: linear-gradient(135deg, #01411C 0%, #065f41 100%);
    border: 2px solid #D4AF37;
    color: white;
    position: relative;
    overflow: hidden;
  }

  .btn-primary-enhanced::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
  }

  .btn-primary-enhanced:hover::before {
    left: 100%;
  }

  /* تحسينات أداء الحركة */
  .gpu-accelerated {
    will-change: transform, opacity;
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  /* تحسين النماذج للهواتف */
  @media (max-width: 640px) {
    .form-container {
      padding: 1rem;
    }
    
    .form-input {
      font-size: 16px !important; /* منع الزوم في iOS */
    }
    
    .form-select {
      font-size: 16px !important;
    }
  }

  /* تحسينات الوصولية */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* تحسين التركيز للوصولية */
  .focus-visible:focus {
    outline: 3px solid rgba(212, 175, 55, 0.6);
    outline-offset: 2px;
  }

  /* تحسينات الأداء للشاشات الكبيرة */
  @media (min-width: 1920px) {
    .container-ultra-wide {
      max-width: 1600px;
      margin: 0 auto;
    }
  }

  /* شبكة عربية بسيطة */
  .arabic-grid {
    display: grid;
    gap: 1rem;
    grid-template-columns: 1fr;
  }
  
  @media (min-width: 640px) {
    .arabic-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }
  }
  
  @media (min-width: 1024px) {
    .arabic-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
    }
  }
  
  @media (min-width: 1280px) {
    .arabic-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  /* تحسينات للنماذج في RTL */
  .form-rtl {
    direction: rtl;
  }
  
  .form-rtl input,
  .form-rtl textarea,
  .form-rtl select {
    text-align: right;
    direction: rtl;
  }

  /* تأثيرات تحويم بسيطة */
  .hover-lift {
    transition: all 0.2s ease;
  }
  
  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  /* مؤشر تحميل بسيط */
  .spinner-rtl {
    border: 3px solid #f3f3f3;
    border-top: 3px solid #D4AF37;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    animation: spin 1s linear infinite;
    margin: 0 auto;
  }
  
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* أنيميشن Panel السفلي */
  @keyframes slide-down {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-slide-down {
    animation: slide-down 0.3s ease-out;
  }

  /* تحسينات للحركة المقللة */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* تحسينات CRM خاصة - مصححة */
  .crm-container {
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
    overflow-y: auto;
    scroll-behavior: smooth;
  }

  .crm-card {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    transition: all 0.2s ease;
  }

  .crm-card:active {
    transform: scale(0.98);
  }

  /* إعدادات السحب للموبايل مبسطة */
  .crm-mobile-touch {
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
  }

  /* للحاويات التي تحتاج سحب أفقي */
  .crm-swipe-container {
    touch-action: pan-x;
    -webkit-overflow-scrolling: touch;
    user-select: none;
    -webkit-user-select: none;
    -webkit-touch-callout: none;
    overscroll-behavior-x: contain;
  }

  /* إخفاء شريط التمرير في قوائم CRM */
  .crm-list::-webkit-scrollbar {
    display: none;
  }

  .crm-list {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* تصميم CRM الجديد - احترافي */
  .crm-dark-theme {
    background: linear-gradient(135deg, #1a1d29 0%, #232639 100%);
  }

  .crm-column {
    background: #f8fafc;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    border: 1px solid #e2e8f0;
    overflow: hidden;
  }

  .crm-contact-card {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .crm-contact-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    border-color: #cbd5e1;
    transform: translateY(-1px);
  }

  .crm-contact-card.expanded {
    border-color: #3b82f6;
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);
    transform: scale(1.02);
  }

  /* تحسين السحب للموبايل - مبسط وفعال */
  .crm-mobile-swipe {
    touch-action: manipulation;
    -webkit-overflow-scrolling: touch;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    overscroll-behavior: contain;
  }

  /* سحب iOS-style */
  .ios-swipe {
    will-change: transform;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* شريط CRM السفلي محسن */
  .crm-bottom-bar {
    background: linear-gradient(135deg, #1a1d29 0%, #232639 100%);
    border-top: 1px solid #374151;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .crm-bottom-bar button {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 12px;
    position: relative;
  }

  .crm-bottom-bar button:hover {
    color: #ffffff;
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 0.1);
  }

  .crm-bottom-bar button.active {
    color: #ffffff;
    background: rgba(59, 130, 246, 0.2);
    transform: translateY(-1px);
  }

  .crm-bottom-bar button.active::before {
    content: '';
    position: absolute;
    top: -4px;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    height: 4px;
    background: #3b82f6;
    border-radius: 50%;
  }

  /* تحسينات للأعمدة في سطح المكتب */
  .crm-desktop-columns {
    display: flex;
    gap: 12px;
    padding: 8px;
    overflow-x: auto;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  /* تحسينات نظام الترقيم البصري المطور */
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.8;
      transform: scale(1.1);
    }
  }

  @keyframes glow {
    0%, 100% {
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
    }
    50% {
      box-shadow: 0 4px 16px rgba(0,0,0,0.6), 0 0 8px rgba(255,255,255,0.3);
    }
  }

  .numbering-badge {
    font-family: 'Arial', 'Helvetica', sans-serif !important;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5) !important;
    transition: all 0.3s ease !important;
  }

  .numbering-badge:hover {
    animation: glow 1s ease-in-out !important;
    transform: scale(1.2) !important;
  }

  /* تحسينات للعناصر المرقمة */
  .numbered-element {
    position: relative;
  }

  /* تحسينات خاصة بالباقات */
  .card:has(.numbering-badge) {
    transition: all 0.3s ease;
  }

  .card:has(.numbering-badge):hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  }

  /* تحسينات للأزرار المرقمة */
  button:has(.numbering-badge) {
    transition: all 0.2s ease;
  }

  button:has(.numbering-badge):hover {
    transform: scale(1.05);
  }

  /* تحسينات الواجهة المنسدلة */
  .numbering-dropdown {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: top;
  }

  .numbering-dropdown.expanded {
    animation: slideDown 0.3s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .crm-desktop-columns::-webkit-scrollbar {
    display: none;
  }

  .crm-desktop-columns {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  /* تحسينات المسافات للموبايل - مشابهة للديسكتوب */
  @media (max-width: 768px) {
    .crm-desktop-columns {
      gap: 8px;
      padding: 4px;
    }
    
    .crm-mobile-columns {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
      touch-action: pan-x;
    }
    
    .crm-mobile-columns::-webkit-scrollbar {
      display: none;
    }
    
    .crm-mobile-column {
      flex-shrink: 0;
      width: calc(100vw - 24px);
      max-width: 320px;
    }
  }

  /* أزرار التمرير */
  .crm-scroll-button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    items-center: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .crm-scroll-button:hover {
    background: #f8fafc;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    transform: translateY(-50%) scale(1.1);
  }

  .crm-scroll-button.right {
    right: 8px;
  }

  .crm-scroll-button.left {
    left: 8px;
  }

  /* تحسينات الحركة والانتقالات */
  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(100px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-100px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .slide-in-right {
    animation: slideInRight 0.3s ease-out;
  }

  .slide-in-left {
    animation: slideInLeft 0.3s ease-out;
  }

  /* تحسينات خاصة بالرايت سلايدر المحسن */
  .right-slider-enhanced {
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    overscroll-behavior: contain;
  }

  .right-slider-enhanced::-webkit-scrollbar {
    display: none;
  }

  .right-slider-enhanced {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* تحسين التمرير للمحتوى الكامل */
  .full-scroll-container {
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    overscroll-behavior: contain;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .full-scroll-container::-webkit-scrollbar {
    display: none;
  }

  /* تحسين الحركة للهيدر الديناميكي */
  .dynamic-header {
    position: relative;
    z-index: 1;
    transition: transform 0.3s ease;
  }

  /* منع التداخل بين السحب والنقر */
  .touch-optimized {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }

  /* تحسين السحب للأعمدة */
  .column-drag-area {
    cursor: grab;
  }

  .column-drag-area:active {
    cursor: grabbing;
  }

  /* تأثيرات تفاعلية للبطاقات */
  .contact-card-enter {
    transform: scale(0.9) translateY(20px);
    opacity: 0;
  }

  .contact-card-enter-active {
    transform: scale(1) translateY(0);
    opacity: 1;
    transition: all 0.3s ease-out;
  }

  /* مؤشرات الصفحات محسنة */
  .page-indicator {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .page-indicator:hover {
    transform: scale(1.2);
  }

  .page-indicator.active {
    background: linear-gradient(90deg, #D4AF37, #f1c40f);
    box-shadow: 0 2px 8px rgba(212, 175, 55, 0.4);
  }

  /* تحسينات خاصة بـ iOS Safari */
  @supports (-webkit-touch-callout: none) {
    .crm-mobile-swipe {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
    }
    
    .ios-swipe {
      -webkit-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0);
    }
  }

  /* CSS مبسط للسحب الجديد - مضمون العمل */
  .touch-none {
    touch-action: none;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* تحسينات خاصة بنظام الترقيم الذكي للمس */
  .numbering-badge {
    touch-action: none;
    pointer-events: none;
    -webkit-user-select: none;
    user-select: none;
  }

  /* تحسين السحب للترقيم الذكي على الأجهزة المحمولة */
  @media (hover: none) and (pointer: coarse) {
    .numbering-overlay-draggable {
      touch-action: none;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
      cursor: grab;
    }

    .numbering-overlay-draggable:active {
      cursor: grabbing;
    }
  }

  /* منع التداخل بين السحب والتمرير */
  .numbering-dragging {
    position: fixed;
    z-index: 9999;
    touch-action: none;
    -webkit-user-select: none;
    user-select: none;
  }

  /* تحسينات خاصة بنظام أصحاب العروض والطلبات */
  .owners-system-container {
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* تحسينات السحب التفاعلي للوسطاء - شبيه بـ Leader CRM */
  .swipe-cards-container {
    touch-action: pan-x pan-y;
    -webkit-overflow-scrolling: touch;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    overflow: hidden;
  }

  .broker-swipe-card {
    touch-action: manipulation;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: grab;
    will-change: transform;
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  .broker-swipe-card:active {
    cursor: grabbing;
  }

  /* تأثيرات السحب المحسنة */
  .swipe-overlay-accept {
    background: linear-gradient(45deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.9));
    color: white;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 1rem;
    z-index: 10;
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.2s ease;
  }

  .swipe-overlay-reject {
    background: linear-gradient(45deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.9));
    color: white;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 1rem;
    z-index: 10;
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.2s ease;
  }

  .swipe-overlay-active {
    opacity: 1;
    transform: scale(1);
  }

  /* تحسينات الحركة السلسة للبطاقات */
  .card-swipe-enter {
    transform: scale(0.8) rotate(-5deg);
    opacity: 0;
  }

  .card-swipe-enter-active {
    transform: scale(1) rotate(0deg);
    opacity: 1;
    transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  .card-swipe-exit {
    opacity: 1;
    transform: scale(1);
  }

  .card-swipe-exit-active {
    opacity: 0;
    transform: scale(0.8) rotate(15deg);
    transition: all 0.3s ease-in;
  }

  /* تحسينات للأزرار التفاعلية */
  .swipe-action-button {
    position: relative;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .swipe-action-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.6s;
  }

  .swipe-action-button:hover::before {
    left: 100%;
  }

  .swipe-action-button:active {
    transform: scale(0.95);
  }

  /* تحسينات للمؤشرات */
  .page-dots-container {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin: 1rem 0;
  }

  .page-dot {
    width: 0.5rem;
    height: 0.5rem;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .page-dot.active {
    background: #D4AF37;
    width: 2rem;
    border-radius: 1rem;
    box-shadow: 0 2px 8px rgba(212, 175, 55, 0.4);
  }

  /* أنيميشن اللمعان للسبائك الذهبية */
  @keyframes shine {
    0% {
      background-position: -200% 0;
    }
    50% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }

  .hover-shine:hover {
    animation: shine 1.5s ease-in-out infinite;
  }

  /* تحسينات خاصة بـ iOS */
  @supports (-webkit-touch-callout: none) {
    .broker-swipe-card {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -webkit-transform: translate3d(0, 0, 0);
    }
  }

  /* تحسينات للإيماءات */
  .gesture-enabled {
    touch-action: pan-x pan-y;
    -webkit-overflow-scrolling: touch;
    will-change: transform;
  }

  /* تحسين الأداء للحركة */
  .hardware-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }

  /* بطاقة قابلة للقلب - Flip Card */
  .perspective-1000 {
    perspective: 1000px;
  }

  .backface-hidden {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* تأثيرات الانتقال المحسنة */
  @keyframes swipeCardEnter {
    0% {
      transform: translateX(100%) rotate(10deg) scale(0.8);
      opacity: 0;
    }
    100% {
      transform: translateX(0) rotate(0deg) scale(1);
      opacity: 1;
    }
  }

  @keyframes swipeCardExit {
    0% {
      transform: translateX(0) rotate(0deg) scale(1);
      opacity: 1;
    }
    100% {
      transform: translateX(-100%) rotate(-10deg) scale(0.8);
      opacity: 0;
    }
  }

  .animate-swipe-enter {
    animation: swipeCardEnter 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  .animate-swipe-exit {
    animation: swipeCardExit 0.4s ease-in;
  }

  .role-tile {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    transition: all 0.2s ease;
  }

  .role-tile:active {
    transform: scale(0.95);
  }

  .offer-card {
    touch-action: manipulation;
    transition: all 0.3s ease;
  }

  .offer-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .form-input-enhanced {
    font-size: 16px !important; /* منع الزوم في iOS */
    touch-action: manipulation;
    transition: all 0.2s ease;
  }

  .form-input-enhanced:focus {
    transform: scale(1.02);
  }

  /* تحسينات خاصة للفئات الذهبية والخضراء */
  .btn-royal-green {
    background: linear-gradient(135deg, #01411C 0%, #065f41 100%);
    color: white;
    border: 2px solid #D4AF37;
  }

  .btn-royal-green:hover {
    background: linear-gradient(135deg, #065f41 0%, #01411C 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(1, 65, 28, 0.3);
  }

  .card-gold-border {
    border: 2px solid #D4AF37;
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.1);
  }

  .gradient-royal-green {
    background: linear-gradient(135deg, #01411C 0%, #065f41 100%);
  }

  .gradient-gold {
    background: linear-gradient(135deg, #D4AF37 0%, #f1c40f 100%);
  }

  /* أزرار تفاعلية محسنة للنظام */
  .interactive-btn {
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .interactive-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
  }

  .interactive-btn:hover::before {
    left: 100%;
  }

  /* تحسينات للشريط السفلي */
  .bottom-nav-enhanced {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-top: 1px solid rgba(212, 175, 55, 0.2);
  }

  .bottom-nav-enhanced button {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .bottom-nav-enhanced button:hover {
    color: #01411C;
    transform: translateY(-2px);
    background: rgba(212, 175, 55, 0.1);
  }

  .bottom-nav-enhanced button.active {
    color: #01411C;
    background: rgba(212, 175, 55, 0.2);
  }

  /* فئة CSS مطلوبة لل�� input */
  .input {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #d1d5db;
    border-radius: 0.5rem;
    font-size: 16px;
    transition: all 0.2s ease;
    background-color: var(--input-background);
    color: var(--foreground);
  }

  .input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 2px var(--ring);
  }

  .input::placeholder {
    color: #9ca3af;
  }

  /* إضافة فئات مهمة مفقودة */
  .card-hover-effect {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .card-hover-effect:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
  }

  /* إصلاح كلاسات Tailwind المفقودة */
  .hover\:scale-105:hover {
    transform: scale(1.05);
  }

  .hover\:scale-102:hover {
    transform: scale(1.02);
  }

  .scale-102 {
    transform: scale(1.02);
  }

  .scale-105 {
    transform: scale(1.05);
  }

  /* تحسينات خاصة إضافية للنظام */
  .royal-green-enhanced {
    background: linear-gradient(135deg, #01411C 0%, #065f41 100%);
    color: white;
    border: 2px solid #D4AF37;
    box-shadow: 0 4px 12px rgba(1, 65, 28, 0.2);
  }

  .royal-green-enhanced:hover {
    background: linear-gradient(135deg, #065f41 0%, #01411C 100%);
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 20px rgba(1, 65, 28, 0.3);
  }

  .gold-enhanced {
    background: linear-gradient(135deg, #D4AF37 0%, #f1c40f 100%);
    color: #01411C;
    border: 2px solid #01411C;
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.2);
  }

  .gold-enhanced:hover {
    background: linear-gradient(135deg, #f1c40f 0%, #D4AF37 100%);
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 20px rgba(212, 175, 55, 0.3);
  }

  /* تحسينات للنماذج المحسنة */
  .form-input-enhanced:focus {
    outline: none;
    border-color: var(--accent) !important;
    box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
    transform: scale(1.02);
  }

  .form-input-enhanced:hover {
    border-color: var(--accent);
    box-shadow: 0 2px 8px rgba(212, 175, 55, 0.1);
  }

  /* تحسينا�� خاصة بالبطاقات المحسنة */
  .enhanced-card {
    border: 2px solid transparent;
    background: linear-gradient(white, white) padding-box,
                linear-gradient(135deg, #D4AF37, #f1c40f) border-box;
    transition: all 0.3s ease;
  }

  .enhanced-card:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
  }

  /* تحسينات للحركة السلسة */
  .smooth-animation {
    will-change: transform, opacity, box-shadow;
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  /* إصلاحات للكلاسات المفقودة */
  .hover\:border-green-300:hover {
    border-color: #86efac;
  }

  .hover\:border-yellow-300:hover {
    border-color: #fde047;
  }

  .hover\:border-purple-300:hover {
    border-color: #d8b4fe;
  }

  .hover\:border-blue-300:hover {
    border-color: #93c5fd;
  }

  .border-green-300 {
    border-color: #86efac;
  }

  .border-yellow-300 {
    border-color: #fde047;
  }

  .border-purple-300 {
    border-color: #d8b4fe;
  }

  .border-blue-300 {
    border-color: #93c5fd;
  }

  .from-green-100 {
    --tw-gradient-from: #dcfce7;
  }

  .to-green-200 {
    --tw-gradient-to: #bbf7d0;
  }

  .from-green-200 {
    --tw-gradient-from: #bbf7d0;
  }

  .to-green-300 {
    --tw-gradient-to: #86efac;
  }

  .from-yellow-100 {
    --tw-gradient-from: #fefce8;
  }

  .to-yellow-200 {
    --tw-gradient-to: #fef08a;
  }

  .from-yellow-200 {
    --tw-gradient-from: #fef08a;
  }

  .to-yellow-300 {
    --tw-gradient-to: #fde047;
  }

  .from-purple-100 {
    --tw-gradient-from: #f3e8ff;
  }

  .to-purple-200 {
    --tw-gradient-to: #e9d5ff;
  }

  .from-purple-200 {
    --tw-gradient-from: #e9d5ff;
  }

  .to-purple-300 {
    --tw-gradient-to: #d8b4fe;
  }

  .from-blue-100 {
    --tw-gradient-from: #dbeafe;
  }

  .to-blue-200 {
    --tw-gradient-to: #bfdbfe;
  }

  .from-blue-200 {
    --tw-gradient-from: #bfdbfe;
  }

  .to-blue-300 {
    --tw-gradient-to: #93c5fd;
  }

  /* إضافة تأثيرات محسنة للنظام */
  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideInDown {
    from {
      opacity: 0;
      transform: translateY(-30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeInScale {
    from {
      opacity: 0;
      transform: scale(0.8);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-slide-in-up {
    animation: slideInUp 0.5s ease-out;
  }

  .animate-slide-in-down {
    animation: slideInDown 0.5s ease-out;
  }

  .animate-fade-in-scale {
    animation: fadeInScale 0.4s ease-out;
  }

  /* أنيميشن القوائم المنبثقة CRM */
  @keyframes menuFadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .crm-dropdown-menu {
    animation: menuFadeIn 0.2s ease-out;
  }

  /* تحسينات خاصة للمؤشرات والأيقونات */
  .icon-enhanced {
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
    transition: all 0.3s ease;
  }

  .icon-enhanced:hover {
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
    transform: scale(1.1);
  }

  /* تحسينات خاصة لصفحة نشر العقار - مُحسنة للمس */
  .property-upload-container {
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    overscroll-behavior: contain;
  }

  .feature-counter-button {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    user-select: none;
    transition: all 0.2s ease;
    min-height: 44px;
    min-width: 44px;
  }

  .feature-counter-button:active {
    transform: scale(0.95);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }

  .luxury-feature-card {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform;
  }

  .luxury-feature-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  }

  .luxury-feature-card:active {
    transform: translateY(0) scale(0.98);
  }

  /* تحسينات العدادات التفاعلية للمميزات الفاخرة */
  .premium-counter-plus {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    border: none;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
  }

  .premium-counter-plus:hover {
    background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
    transform: scale(1.05);
  }

  .premium-counter-plus:active {
    transform: scale(0.95);
  }

  .luxury-counter-plus {
    background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
    border: none;
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
  }

  .luxury-counter-plus:hover {
    background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
    transform: scale(1.05);
  }

  .luxury-counter-plus:active {
    transform: scale(0.95);
  }

  /* تأثيرات ملونة للمميزات المختلفة */
  .health-feature {
    border-left: 4px solid #3b82f6;
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
  }

  .tech-feature {
    border-left: 4px solid #10b981;
    background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
  }

  .eco-feature {
    border-left: 4px solid #f59e0b;
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
  }

  .room-feature {
    border-left: 4px solid #8b5cf6;
    background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%);
  }

  .finish-feature {
    border-left: 4px solid #6366f1;
    background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
  }

  /* تحسينات خاصة بأجهزة اللمس للعدادات */
  @media (hover: none) and (pointer: coarse) {
    .feature-counter-button {
      min-height: 48px;
      min-width: 48px;
      font-size: 16px;
    }
    
    .luxury-feature-card {
      padding: 1rem;
      margin-bottom: 0.5rem;
    }
    
    .feature-counter-display {
      font-size: 1.25rem;
      font-weight: bold;
      min-width: 3rem;
      text-align: center;
    }
  }

  /* تحسينات الأنيميشن للعدادات */
  @keyframes counterIncrement {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.2);
      color: #10b981;
    }
    100% {
      transform: scale(1);
    }
  }

  @keyframes counterDecrement {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.2);
      color: #ef4444;
    }
    100% {
      transform: scale(1);
    }
  }

  .counter-increment {
    animation: counterIncrement 0.3s ease-out;
  }

  .counter-decrement {
    animation: counterDecrement 0.3s ease-out;
  }

  /* تحسينات خاصة للتبويبات في صفحة نشر العقار */
  .property-tabs-container {
    position: sticky;
    top: 0;
    z-index: 10;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 2px solid #D4AF37;
  }

  .property-tab-button {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    transition: all 0.3s ease;
    position: relative;
  }

  .property-tab-button.active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #01411C, #D4AF37);
    border-radius: 2px 2px 0 0;
  }

  /* إصلاح نهائي لترتيب التبويبات RTL */
  .property-tabs-container [role="tablist"][dir="rtl"] {
    display: flex !important;
    flex-direction: row !important;
    justify-content: stretch !important;
    text-align: center !important;
  }

  .property-tabs-container [role="tablist"][dir="rtl"] > * {
    flex: 1 !important;
  }

  /* تصحيح ترتيب التبويبات في RTL: 
     العنصر الأول = أقصى اليمين
     العنصر الثاني = الوسط  
     العنصر الثالث = أقصى اليسار */
  .property-tabs-container [role="tablist"][dir="rtl"] {
    --tab-order-right: 1;
    --tab-order-center: 2; 
    --tab-order-left: 3;
  }

  /* تحسينات خاصة بتطبيق الذكاء الاصطناعي */
  .ai-generator-card {
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    border: 2px solid #0ea5e9;
    box-shadow: 0 4px 20px rgba(14, 165, 233, 0.1);
  }

  .ai-tone-selector {
    touch-action: manipulation;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .ai-tone-selector:active {
    transform: scale(0.95);
  }

  .ai-tone-selector.selected {
    background: linear-gradient(135deg, #01411C 0%, #065f41 100%);
    color: white;
    transform: scale(1.02);
    box-shadow: 0 8px 25px rgba(1, 65, 28, 0.3);
  }

  /* تحسينات إضافية للذكاء الاصطناعي */
  .ai-description-textarea {
    resize: vertical;
    min-height: 150px;
    font-family: 'Tajawal', 'Dubai', sans-serif;
    line-height: 1.6;
    direction: rtl;
    text-align: right;
  }

  .ai-generate-button {
    background: linear-gradient(135deg, #01411C 0%, #065f41 100%);
    box-shadow: 0 4px 20px rgba(1, 65, 28, 0.3);
    transition: all 0.3s ease;
  }

  .ai-generate-button:hover {
    background: linear-gradient(135deg, #065f41 0%, #01411C 100%);
    box-shadow: 0 8px 30px rgba(1, 65, 28, 0.4);
    transform: translateY(-2px);
  }

  .ai-generate-button:active {
    transform: translateY(0) scale(0.98);
  }

  /* تصحيح نهائي للتحسينات */
  .system-enhanced {
    font-family: 'Tajawal', 'Dubai', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* فئة CSS مطلوبة للـ btn */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 0.5rem;
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s ease;
    cursor: pointer;
    touch-action: manipulation;
    background-color: var(--primary);
    color: var(--primary-foreground);
    border: 1px solid var(--border);
  }

  .btn:hover {
    background-color: var(--accent);
    color: var(--accent-foreground);
  }

  .btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .swipe-container {
    touch-action: pan-x;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-x: contain;
    cursor: grab;
  }

  .swipe-container:active {
    cursor: grabbing;
  }

  /* منع السحب العمودي أثناء السحب الأفقي */
  .prevent-scroll {
    touch-action: none;
    overflow: hidden;
  }

  /* تحسينات للحركة السلسة */
  .smooth-transform {
    transition: transform 0.2s ease-out;
    will-change: transform;
  }

  /* إعدادات خاصة للأجهزة المحمولة */
  @media (hover: none) and (pointer: coarse) {
    .mobile-swipe-enabled {
      touch-action: pan-x;
      -webkit-overflow-scrolling: touch;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
      overscroll-behavior: contain;
    }
  }

  /* تحسينات لسطح المكتب */
  @media (hover: hover) and (pointer: fine) {
    .desktop-scroll-enabled {
      overflow-x: auto;
      overflow-y: hidden;
      scroll-behavior: smooth;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    
    .desktop-scroll-enabled::-webkit-scrollbar {
      display: none;
    }
  }

  /* تحسينات السحب والإفلات الجديدة */
  .draggable-card {
    touch-action: none;
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    cursor: grab;
    transition: all 0.2s ease;
  }

  /* تحسينات خاصة لكانبان CRM - دعم كامل للتمرير والسحب */
  .kanban-columns-container {
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: visible;
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
  }

  .crm-column-list {
    -webkit-overflow-scrolling: touch;
    overflow-y: auto;
    overflow-x: visible;
    scroll-behavior: smooth;
  }

  /* البطاقات */
  .crm-card {
    -webkit-tap-highlight-color: transparent;
    position: relative;
  }

  /* مقبض السحب */
  .crm-drag-handle {
    cursor: grab;
    -webkit-tap-highlight-color: transparent;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  .crm-drag-handle:active {
    cursor: grabbing;
  }

  /* تحسينات خاصة بلوحة التحكم الشاملة 252 */
  .dashboard-main-container {
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    overscroll-behavior: contain;
  }

  .kpi-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .kpi-card:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
  }

  .license-indicator {
    animation: pulse 2s infinite;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .license-indicator:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  /* مؤشر تحويل العملاء */
  .conversion-funnel-stage {
    transition: all 0.3s ease;
    border-radius: 8px;
    padding: 1rem;
  }

  .conversion-funnel-stage:hover {
    background: rgba(212, 175, 55, 0.05);
    transform: translateX(-4px);
  }

  /* بطاقات العقارات المحسنة */
  .property-card-enhanced {
    border: 1px solid #e5e7eb;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }

  .property-card-enhanced::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
    transition: left 0.5s;
  }

  .property-card-enhanced:hover::before {
    left: 100%;
  }

  .property-card-enhanced:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 25px rgba(0, 0, 0, 0.1);
    border-color: #D4AF37;
  }

  /* مؤشر الأمان للوثائق */
  .security-indicator {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
  }

  .security-indicator.secured {
    background: rgba(34, 197, 94, 0.1);
    color: #15803d;
    border: 1px solid rgba(34, 197, 94, 0.2);
  }

  .security-indicator.unsecured {
    background: rgba(239, 68, 68, 0.1);
    color: #dc2626;
    border: 1px solid rgba(239, 68, 68, 0.2);
  }

  /* أزرار التحميل الجماعي */
  .bulk-upload-section {
    background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
    border: 2px solid #a855f7;
    border-radius: 12px;
    position: relative;
    overflow: hidden;
  }

  .bulk-upload-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(168, 85, 247, 0.1), transparent);
    transition: left 0.8s;
  }

  .bulk-upload-section:hover::before {
    left: 100%;
  }

  /* تحسينات نظام B2B */
  .b2b-customer-group {
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .b2b-customer-group:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .b2b-customer-group::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, transparent, var(--group-color, #3b82f6), transparent);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .b2b-customer-group:hover::after {
    opacity: 1;
  }

  /* قسائم الخصم */
  .coupon-card {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  .coupon-card::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 20px;
    height: 20px;
    background: #D4AF37;
    clip-path: polygon(0 0, 100% 100%, 100% 0);
  }

  .coupon-card:hover {
    border-color: #D4AF37;
    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.15);
    transform: translateY(-2px);
  }

  /* نجوم التقييم */
  .rating-stars {
    display: flex;
    align-items: center;
    gap: 2px;
  }

  .rating-star {
    transition: all 0.2s ease;
  }

  .rating-star.filled {
    color: #fbbf24;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
  }

  .rating-star.empty {
    color: #d1d5db;
  }

  /* تحسينات الفلاتر الزمنية */
  .time-filter-buttons {
    display: flex;
    gap: 0.5rem;
    background: rgba(255, 255, 255, 0.9);
    padding: 0.25rem;
    border-radius: 8px;
    border: 1px solid #D4AF37;
  }

  .time-filter-button {
    padding: 0.5rem 1rem;
    border-radius: 6px;
    font-size: 0.875rem;
    font-weight: 500;
    transition: all 0.2s ease;
    cursor: pointer;
    border: none;
    background: transparent;
  }

  .time-filter-button.active {
    background: #01411C;
    color: white;
    box-shadow: 0 2px 4px rgba(1, 65, 28, 0.2);
  }

  .time-filter-button:not(.active) {
    color: #01411C;
  }

  .time-filter-button:not(.active):hover {
    background: rgba(212, 175, 55, 0.1);
  }

  /* تحسينات شريط التقدم */
  .progress-bar {
    background: #f1f5f9;
    border-radius: 9999px;
    overflow: hidden;
    position: relative;
  }

  .progress-fill {
    background: linear-gradient(90deg, #01411C, #D4AF37);
    height: 100%;
    border-radius: 9999px;
    transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }

  .progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: shimmer 2s infinite;
  }

  @keyframes shimmer {
    0% { left: -100%; }
    100% { left: 100%; }
  }

  /* تحسينات الإحصائيات الحية */
  .live-stat {
    font-weight: bold;
    position: relative;
  }

  .live-stat.updating {
    animation: statUpdate 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  @keyframes statUpdate {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); color: #10b981; }
    100% { transform: scale(1); }
  }

  /* تحسينات الواجهة للأجهزة المحمولة */
  @media (max-width: 768px) {
    .dashboard-main-container {
      padding: 0.5rem;
    }
    
    .kpi-card {
      padding: 1rem;
      margin-bottom: 0.75rem;
    }
    
    .property-card-enhanced {
      margin-bottom: 0.75rem;
    }
    
    .conversion-funnel-stage {
      padding: 0.75rem;
      margin-bottom: 0.5rem;
    }
    
    .time-filter-buttons {
      overflow-x: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    
    .time-filter-buttons::-webkit-scrollbar {
      display: none;
    }
  }

  /* تحسينات إضافية للوصولية */
  .dashboard-main-container [role="button"]:focus-visible {
    outline: 3px solid rgba(212, 175, 55, 0.5);
    outline-offset: 2px;
  }

  .dashboard-main-container [tabindex="0"]:focus-visible {
    outline: 2px solid #D4AF37;
    outline-offset: 1px;
  }

  .dragging {
    cursor: grabbing;
    transform: rotate(5deg) scale(1.05);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    pointer-events: none;
  }

  .drop-zone {
    transition: all 0.3s ease;
  }

  .drop-zone.drag-over {
    background-color: rgba(212, 175, 55, 0.1);
    border: 2px dashed #D4AF37;
    transform: scale(1.02);
  }

  /* تحسينات الأعمدة المتجانبة مع Auto-Scroll */
  .kanban-columns-container {
    display: flex;
    gap: 1rem;
    overflow-x: auto;
    overflow-y: visible !important;
    padding: 0.5rem;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    touch-action: pan-x;
    -ms-overflow-style: none;
    scrollbar-width: none;
    position: relative;
  }

  .kanban-columns-container::-webkit-scrollbar {
    display: none;
  }

  /* مؤشر التمرير التلقائي */
  .auto-scroll-indicator {
    position: fixed;
    z-index: 9998;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .auto-scroll-indicator.active {
    opacity: 1;
  }

  .auto-scroll-left {
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 100px;
    height: 100%;
    background: linear-gradient(90deg, rgba(1, 65, 28, 0.3) 0%, transparent 100%);
  }

  .auto-scroll-right {
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 100px;
    height: 100%;
    background: linear-gradient(270deg, rgba(1, 65, 28, 0.3) 0%, transparent 100%);
  }

  .auto-scroll-top {
    top: 0;
    left: 0;
    width: 100%;
    height: 100px;
    background: linear-gradient(180deg, rgba(1, 65, 28, 0.3) 0%, transparent 100%);
  }

  .auto-scroll-bottom {
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100px;
    background: linear-gradient(0deg, rgba(1, 65, 28, 0.3) 0%, transparent 100%);
  }

  /* إصلاح السحب والإفلات للأعمدة */
  .kanban-column {
    overflow: visible !important;
    position: relative;
  }

  /* إصلاح البطاقات المسحوبة */
  .crm-card {
    position: relative;
  }

  /* البطاقة أثناء السحب تظهر فوق كل شيء */
  .crm-card[style*="zIndex: 1000"] {
    z-index: 1000 !important;
    position: relative;
  }

  /* القوائم المنبثقة - تظهر فوق كل شيء */
  .crm-card .relative {
    position: relative;
    z-index: auto;
  }

  /* القائمة المنبثقة بـ z-index عالي جداً */
  .crm-card .absolute[style*="zIndex: 99999"] {
    z-index: 99999 !important;
    position: absolute !important;
  }

  /* إصلاح نهائي لظهور القوائم فوق حدود الأعمدة */
  .kanban-column {
    overflow: visible !important;
  }

  /* السماح للقوائم بالخروج من حدود البطاقة */
  .crm-card {
    overflow: visible !important;
    position: relative;
  }

  /* منع overflow من إخفاء القوائم */
  .crm-card > *:not([role="menu"]):not([class*="absolute"]) {
    overflow: visible !important;
  }

  /* السماح للأعمدة بالتمدد طبيعياً */
  .kanban-column > div {
    overflow: visible !important;
  }

  .kanban-column {
    flex-shrink: 0;
    width: 320px;
    min-height: 500px;
  }

  @media (max-width: 768px) {
    .kanban-column {
      width: calc(100vw - 2rem);
    }
    
    .kanban-columns-container {
      gap: 0.5rem;
      padding: 0.25rem;
    }
  }

  /* تحسينات السحب والإفلات مع الانكماش والتوسع */
  .crm-card.expanded {
    z-index: 50;
  }

  .crm-card.expanded[style*="zIndex: 1000"] {
    z-index: 1000 !important;
  }

  /* تحسين السحب للبطاقات المتوسعة */
  .crm-card.expanded .crm-drag-handle {
    cursor: grab;
  }

  .crm-card.expanded .crm-drag-handle:active {
    cursor: grabbing;
  }

  /* السماح بالسحب حتى مع البطاقات المتوسعة */
  .crm-card[style*="opacity: 0.5"] {
    pointer-events: auto !important;
  }

  /* تحسين مظهر العمود أثناء السحب فوقه */
  .kanban-column.drag-over {
    background-color: rgba(212, 175, 55, 0.1);
    border-color: #22c55e !important;
    transform: scale(1.02);
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
  }

  /* تحسين مظهر العمود المسحوب */
  .kanban-column[style*="opacity: 0.5"] {
    opacity: 0.5 !important;
    transform: rotate(2deg) scale(0.98);
  }

  /* ضمان أن القوائم المنبثقة تظهر فوق كل شيء */
  .crm-card [role="menu"],
  .crm-card [class*="dropdown"],
  .crm-card [class*="popover"] {
    z-index: 10000 !important;
  }

  /* تحسينات لضمان عمل السحب مع البطاقات الموسعة */
  .crm-card.expanded[style*="zIndex: 1000"] .crm-drag-handle {
    pointer-events: auto !important;
    touch-action: none !important;
  }

  /* منع overflow من إخفاء القوائم - مع السماح بالتمرير الأفقي */
  .kanban-columns-container {
    overflow-x: auto !important;
    overflow-y: visible !important;
  }

  .kanban-column {
    overflow: visible !important;
  }

  .crm-card {
    overflow: visible !important;
  }

  .crm-card > * {
    overflow: visible !important;
  }

  /* استثناء: السماح بالتمرير العمودي للعمود فقط */
  .kanban-column > .flex-1 {
    overflow-y: auto !important;
    overflow-x: visible !important;
  }

  /* تحسين cursor للبطاقات القابلة للسحب */
  .crm-card [style*="cursor: grab"] {
    cursor: grab !important;
  }

  .crm-card [style*="cursor: grabbing"] {
    cursor: grabbing !important;
  }

  /* Portal Menu - تأكد من ظهوره فوق كل شيء */
  #portal-menu {
    position: fixed !important;
    z-index: 99999 !important;
    pointer-events: auto !important;
  }

  /* تأكد من أن body يسمح بالنقر على Portal */
  body:has(#portal-menu) {
    overflow: visible !important;
  }

  /* تأثير بصري للعمود عند السحب فوقه */
  .kanban-column[style*="border-green-500"] {
    animation: columnPulse 0.5s ease-in-out;
  }

  @keyframes columnPulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.02);
    }
  }

  /* تحسينات مناطق الإفلات الديناميكية */
  .drop-zone-animated {
    animation: dropZonePulse 1.5s ease-in-out infinite;
  }

  @keyframes dropZonePulse {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.8;
      transform: scale(1.02);
    }
  }

  /* نظام الخط الأخضر المحسّن - بدون توسع */
  .drop-line-vertical {
    position: absolute;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, #01411C 0%, #22c55e 50%, #01411C 100%);
    box-shadow: 
      0 0 20px rgba(34, 197, 94, 0.8),
      0 0 40px rgba(1, 65, 28, 0.6),
      0 0 60px rgba(34, 197, 94, 0.4);
    z-index: 9999;
    pointer-events: none;
    border-radius: 2px;
    animation: dropLinePulse 1.5s ease-in-out infinite;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .drop-line-horizontal {
    position: absolute;
    height: 4px;
    width: 100%;
    background: linear-gradient(90deg, #01411C 0%, #22c55e 50%, #01411C 100%);
    box-shadow: 
      0 0 20px rgba(34, 197, 94, 0.8),
      0 0 40px rgba(1, 65, 28, 0.6),
      0 0 60px rgba(34, 197, 94, 0.4);
    z-index: 9999;
    pointer-events: none;
    border-radius: 2px;
    animation: dropLinePulse 1.5s ease-in-out infinite;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* دوائر الخط الأخضر */
  .drop-line-circle {
    position: absolute;
    width: 12px;
    height: 12px;
    borderRadius: 50%;
    background: #22c55e;
    border: 2px solid #01411C;
    box-shadow: 
      0 0 12px rgba(34, 197, 94, 0.9),
      0 0 24px rgba(1, 65, 28, 0.5);
    animation: circlePulse 1.5s ease-in-out infinite;
  }

  @keyframes dropLinePulse {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
      filter: brightness(1);
    }
    50% {
      opacity: 0.85;
      transform: scale(1.05);
      filter: brightness(1.2);
    }
  }

  @keyframes circlePulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 
        0 0 12px rgba(34, 197, 94, 0.9),
        0 0 24px rgba(1, 65, 28, 0.5);
    }
    50% {
      transform: scale(1.3);
      box-shadow: 
        0 0 20px rgba(34, 197, 94, 1),
        0 0 40px rgba(1, 65, 28, 0.7);
    }
  }

  /* تأثير التوهج للخط */
  .drop-line-vertical::before,
  .drop-line-horizontal::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: inherit;
    filter: blur(12px);
    opacity: 0.6;
    z-index: -1;
  }

  /* تحسين الحركة للهيدر الديناميكي */
  .dynamic-header {
    position: relative;
    z-index: 1;
    transition: transform 0.3s ease;
  }

  /* تحسينات خاصة بالرايت سلايدر المحسن */
  .right-slider-enhanced {
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    overscroll-behavior: contain;
  }

  .right-slider-enhanced::-webkit-scrollbar {
    display: none;
  }

  .right-slider-enhanced {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* تحسين التمرير للمحتوى الكامل */
  .full-scroll-container {
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    overscroll-behavior: contain;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .full-scroll-container::-webkit-scrollbar {
    display: none;
  }

  /* تحسينات خاصة بأجهزة اللمس للرايت سلايدر */
  @media (hover: none) and (pointer: coarse) {
    /* للأجهزة اللوحية والهواتف */
    .right-slider-enhanced {
      touch-action: pan-y pinch-zoom;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
      scroll-snap-type: y proximity;
    }

    .full-scroll-container {
      scroll-snap-type: y proximity;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
    }

    /* تحسين النقر والسحب للعناصر التفاعلية */
    .dynamic-header {
      scroll-snap-align: start;
    }
  }

  /* تحسينات خاصة بسبائك الباقات الذهبية */
  .slab {
    position: relative;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .slab:hover {
    transform: translateY(-3px);
    filter: brightness(1.1);
  }

  .slab::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.6s;
  }

  .slab:hover::before {
    left: 100%;
  }

  .slab.compact {
    padding: 0.375rem 0.75rem;
    min-height: 28px;
    font-size: 0.75rem;
    border-radius: 0.5rem;
  }

  /* تحسينات خاصة ببطاقة العمل الرقمية */
  .business-card-container {
    min-height: 100vh;
    background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 50%, #fffef7 100%);
  }

  .business-card-cover {
    position: relative;
    overflow: hidden;
  }

  .business-card-avatar {
    border: 4px solid #D4AF37;
    box-shadow: 0 8px 32px rgba(212, 175, 55, 0.3);
  }

  .business-card-rating-stars {
    background: linear-gradient(135deg, #fffef7 0%, #f0fdf4 100%);
    border: 2px solid rgba(212, 175, 55, 0.3);
    border-radius: 12px;
    transition: all 0.3s ease;
  }

  .business-card-rating-stars:hover {
    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.2);
    transform: translateY(-2px);
  }

  .business-card-license-warning {
    background: linear-gradient(135deg, #fef3c7 0%, #fbbf24 100%);
    border: 2px solid #f59e0b;
    animation: pulse 2s infinite;
  }

  .business-card-working-hours {
    transition: all 0.3s ease;
  }

  .business-card-working-hours:hover {
    background: rgba(212, 175, 55, 0.05);
    transform: translateX(-4px);
  }

  .business-card-stat {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .business-card-stat:hover {
    transform: translateY(-4px) scale(1.05);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
  }

  .business-card-icon-glow {
    filter: drop-shadow(0 2px 8px rgba(255, 255, 255, 0.3));
  }

  .business-card-contact-button {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .business-card-contact-button:hover {
    transform: translateY(-4px) scale(1.05);
  }

  .business-card-schedule-wizard {
    max-width: 600px;
    margin: 0 auto;
  }

  .business-card-progress-step {
    transition: all 0.3s ease;
  }

  .business-card-progress-step.active {
    background: linear-gradient(90deg, #01411C, #D4AF37);
    box-shadow: 0 2px 8px rgba(212, 175, 55, 0.4);
  }

  .business-card-calendar {
    border: 2px solid #D4AF37;
    border-radius: 12px;
    overflow: hidden;
  }

  .business-card-time-button {
    transition: all 0.2s ease;
  }

  .business-card-time-button.selected {
    background: #D4AF37;
    color: #01411C;
    border: 2px solid #01411C;
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
  }

  .business-card-time-button:hover {
    background: rgba(212, 175, 55, 0.1);
    border-color: #D4AF37;
  }

  /* تحسينات خاصة باللفت سلايدر المحسن */
  .left-slider-enhanced {
    touch-action: pan-y;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    overscroll-behavior: contain;
  }

  .left-slider-enhanced::-webkit-scrollbar {
    display: none;
  }

  .left-slider-enhanced {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* تحسينات خاصة بأجهزة اللمس للفت سلايدر */
  @media (hover: none) and (pointer: coarse) {
    /* للأجهزة اللوحية والهواتف */
    .left-slider-enhanced {
      touch-action: pan-y pinch-zoom;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
      scroll-snap-type: y proximity;
    }

    /* تحسين النقر والسحب للعناصر التفاعلية في اللفت سلايدر */
    .left-slider-tool-card {
      scroll-snap-align: start;
      min-height: 80px;
      touch-action: manipulation;
    }

    .left-slider-menu-item {
      scroll-snap-align: start;
      min-height: 60px;
      touch-action: manipulation;
    }
  }

  /* تحسينات الأدوات في صندوق الأدوات */
  .left-slider-tool-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  .left-slider-tool-card:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .left-slider-tool-card:active {
    transform: translateY(0) scale(0.98);
  }

  /* حاسبة التمويل المحسنة */
  .finance-calculator-main {
    background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 25%, #fffef7 100%);
    border: 2px solid #D4AF37;
    transition: all 0.3s ease;
  }

  .finance-calculator-main:hover {
    background: linear-gradient(135deg, #01411C 0%, #065f41 100%);
    color: white;
    box-shadow: 0 8px 25px rgba(1, 65, 28, 0.3);
  }

  .finance-calculator-expanded {
    background: linear-gradient(135deg, #fffef7 0%, #f0fdf4 100%);
    border: 2px solid #D4AF37;
    box-shadow: 0 8px 25px rgba(212, 175, 55, 0.15);
  }

  /* تحسينات بطاقات البنوك */
  .bank-calculator-link {
    transition: all 0.2s ease;
    border: 1px solid transparent;
  }

  .bank-calculator-link:hover {
    background: rgba(59, 130, 246, 0.05);
    border-color: rgba(59, 130, 246, 0.2);
    transform: translateX(-2px);
  }

  /* تحسينات الإحصائيات السريعة */
  .left-slider-stat-card {
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .left-slider-stat-card:hover {
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }

  /* تحسينات قائمة الدعم */
  .left-slider-support-item {
    transition: all 0.2s ease;
    touch-action: manipulation;
  }

  .left-slider-support-item:hover {
    background: rgba(212, 175, 55, 0.05);
    transform: translateX(-4px);
  }

  .left-slider-support-item:active {
    transform: translateX(-2px) scale(0.98);
  }

  /* تحسينات الخدمات المحمية - جديدة */
  .protected-service-card {
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: linear-gradient(135deg, #fffef7 0%, #f0fdf4 100%);
  }

  .protected-service-card:hover {
    background: linear-gradient(135deg, #01411C 0%, #065f41 100%);
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 25px rgba(1, 65, 28, 0.3);
  }

  .protected-service-badge {
    position: absolute;
    top: -8px;
    right: -8px;
    background: linear-gradient(135deg, #D4AF37 0%, #f1c40f 100%);
    color: #01411C;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    box-shadow: 0 2px 8px rgba(212, 175, 55, 0.4);
    animation: protectedBadgeGlow 2s infinite;
  }

  @keyframes protectedBadgeGlow {
    0%, 100% {
      box-shadow: 0 2px 8px rgba(212, 175, 55, 0.4);
    }
    50% {
      box-shadow: 0 4px 16px rgba(212, 175, 55, 0.6);
    }
  }

  /* تحسينات الشبكة للأدوات */
  .left-slider-tools-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    padding: 0.5rem;
  }

  @media (min-width: 768px) {
    .left-slider-tools-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }
  }

  @media (min-width: 1024px) {
    .left-slider-tools-grid {
      grid-template-columns: repeat(4, 1fr);
      gap: 2rem;
    }
  }

  /* تحسينات خاصة بحركة اللفت سلايدر */
  .left-slider-entrance {
    animation: slideInLeft 0.3s ease-out;
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* تحسينات Footer اللفت سلايدر */
  .left-slider-footer {
    background: rgba(248, 250, 252, 0.95);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-top: 1px solid rgba(212, 175, 55, 0.2);
  }

  .left-slider-footer button {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .left-slider-footer button:hover {
    color: #dc2626;
    background: rgba(239, 68, 68, 0.1);
    transform: translateY(-2px);
  }

  /* تحسينات نظام مشاركة العروض - جديد */
  .sharing-settings-toggle {
    position: relative;
    display: inline-flex;
    height: 24px;
    width: 44px;
    items-align: center;
    border-radius: 9999px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .sharing-settings-toggle.active {
    background: #14b8a6;
  }

  .sharing-settings-toggle.inactive {
    background: #d1d5db;
  }

  .sharing-settings-toggle-thumb {
    display: inline-block;
    height: 16px;
    width: 16px;
    border-radius: 9999px;
    background: white;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }

  .sharing-settings-toggle.active .sharing-settings-toggle-thumb {
    transform: translateX(24px);
  }

  .sharing-settings-toggle.inactive .sharing-settings-toggle-thumb {
    transform: translateX(4px);
  }

  /* Logo position selector */
  .logo-position-selector {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
  }

  .logo-position-option {
    aspect-ratio: 1;
    border-radius: 0.5rem;
    border: 2px solid transparent;
    transition: all 0.2s ease;
    cursor: pointer;
    position: relative;
  }

  .logo-position-option:hover {
    border-color: rgba(20, 184, 166, 0.3);
    transform: scale(1.05);
  }

  .logo-position-option.selected {
    border-color: #14b8a6;
    background: rgba(20, 184, 166, 0.1);
  }

  .logo-position-option .position-indicator {
    position: absolute;
    width: 12px;
    height: 12px;
    border-radius: 2px;
    transition: all 0.2s ease;
  }

  .logo-position-option.selected .position-indicator {
    background: #14b8a6;
  }

  .logo-position-option:not(.selected) .position-indicator {
    background: #9ca3af;
  }

  /* Text confirm modal animation */
  .text-confirm-modal {
    animation: modalSlideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  @keyframes modalSlideUp {
    from {
      opacity: 0;
      transform: translateY(50px) scale(0.9);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  /* Sharing settings section headings */
  .sharing-setting-item {
    transition: all 0.2s ease;
    padding: 1rem;
    border-radius: 0.5rem;
  }

  .sharing-setting-item:hover {
    background: rgba(20, 184, 166, 0.05);
  }

  /* Custom note editor */
  .custom-note-editor {
    animation: slideDown 0.3s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      max-height: 0;
      margin-top: 0;
    }
    to {
      opacity: 1;
      max-height: 200px;
      margin-top: 0.75rem;
    }
  }

  /* WhatsApp sharing buttons enhanced */
  .whatsapp-share-btn {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }

  .whatsapp-share-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.6s;
  }

  .whatsapp-share-btn:hover::before {
    left: 100%;
  }

  .whatsapp-share-btn:active {
    transform: scale(0.95);
  }

  /* Success checkmark animation */
  .success-checkmark {
    animation: checkmarkPop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  @keyframes checkmarkPop {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    50% {
      transform: scale(1.2);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Platform icon bounce */
  .platform-icon {
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  .platform-icon:hover {
    transform: scale(1.1) rotate(5deg);
  }

  .platform-icon:active {
    transform: scale(0.95) rotate(-5deg);
  }

  /* 🔔 زر الإشعارات في الهيدر */
  .notifications-button-wrapper button {
    border: 2px solid #D4AF37 !important;
    background: rgba(255, 255, 255, 0.1) !important;
    color: white !important;
    transition: all 0.3s ease !important;
  }

  .notifications-button-wrapper button:hover {
    background: rgba(255, 255, 255, 0.2) !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
  }

  .notifications-button-wrapper button svg {
    color: white !important;
  }

  /* العداد يبقى كما هو */
  .notifications-button-wrapper .animate-pulse {
    background: #ef4444 !important;
    color: white !important;
  }
}